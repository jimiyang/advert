(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[40],{H1Ro:function(e,t,a){"use strict";a.r(t);a("f9jU");var n=a("ZZoX"),s=(a("PWbI"),a("EEhf")),i=(a("Q1Sh"),a("xSYZ")),r=a("mK77"),l=a.n(r),c=a("Ico4"),h=a.n(c),o=a("UWy3"),d=a.n(o),u=a("2w0b"),m=a.n(u),g=a("BigU"),p=a.n(g),v=a("Dyj7"),E=a.n(v),b=(a("K9jA"),a("ekpG")),S=(a("dQQm"),a("2o49")),k=(a("khvN"),a("iNs4")),w=a("a/LZ"),C=a.n(w),N=a("TsPW"),I=k["a"].RangePicker;class j extends u["Component"]{constructor(e){super(e),this.loadList=(()=>{var e=this.state,t=e.pagination,a=e.search,n=e.token,s=l()({currentPage:t.currentPage,limit:t.limit},a,{token:n});Object(N["y"])(s).then(e=>{if(e.success){var a=Object.assign(t,{total:e.total});this.setState({earningsData:e.data,pagination:a})}})}),this.changePage=(e=>{e=0===e?1:e;var t=Object.assign(this.state.pagination,{currentPage:e,current:e});this.setState({pagination:t}),this.loadList()}),this.onShowSizeChange=((e,t)=>{var a=this.state.pagination;a=Object.assign(a,{currentPage:e,current:e,limit:t}),this.setState({pagination:a}),this.loadList()}),this.changeFormEvent=((e,t,a)=>{var n=this.state.search,s={};switch(t){case"date":s={dateStart:a[0],dateEnd:a[1]};break;case"missionId":s={[t]:e.target.value};break;default:break}n=Object.assign(n,s),this.setState({search:n})}),this.searchEvent=(()=>{var e=Object.assign(this.state.pagination,{currentPage:1,current:1});this.setState({pagination:e}),this.loadList()}),this.clearEvent=(()=>{var e=this.state.search;e=Object.assign(e,{dateStart:null,dateEnd:null,missionId:null});var t=Object.assign(this.state.pagination,{currentPage:1,current:1});this.setState({pagination:t,search:e}),this.loadList()}),this.widthdrawEvent=(()=>{E.a.push("/getcash")}),this.state={earningsData:[],availableBalance:".",settlecaBalance:".",search:{dateStart:null,dateEnd:null,missionId:null},pagination:{size:"small",showSizeChanger:!0,total:0,currentPage:1,current:1,limit:10,onChange:this.changePage,onShowSizeChange:this.onShowSizeChange},isActive:1}}componentDidMount(){var e=this;this.setState({token:this.props.token},d()(h.a.mark(function t(){return h.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadList();case 2:case"end":return t.stop()}},t)})))}render(){var e=this.state,t=e.earningsData,a=e.pagination,n=e.search,s=[{title:"\u7ed3\u7b97\u65f6\u95f4",key:"updateDate",dataIndex:"updateDate",align:"left",render:e=>C()(e).format("YYYY-MM-DD")},{title:"\u7ed3\u7b97\u5355\u53f7",key:"orderNo",dataIndex:"orderNo",align:"center"},{title:"\u8ba2\u5355\u53f7",key:"missionId",dataIndex:"missionId",align:"center"},{title:"\u6d3b\u52a8",key:"campaignName",dataIndex:"campaignName",align:"center"},{title:"\u516c\u4f17\u53f7",key:"appName",dataIndex:"appName",align:"center"},{title:"\u7ed3\u7b97\u91d1\u989d\uff08\u5143\uff09",key:"orderAmtShow",dataIndex:"orderAmtShow",align:"center"}];return m.a.createElement("div",{className:p.a.arnings},m.a.createElement("ul",{className:p.a.search},m.a.createElement("li",null,m.a.createElement("label",{className:"mr10"},"\u7ed3\u7b97\u65f6\u95f4"),m.a.createElement(I,{className:"w2600",value:null===n.dateStart||""===n.dateStart?null:[C()(n.dateStart,"YYYY-MM-DD"),C()(n.dateEnd,"YYYY-MM-DD")],onChange:(e,t)=>this.changeFormEvent(e,"date",t)})),m.a.createElement("li",null,m.a.createElement("label",{className:"mr10"},"\u8ba2\u5355\u53f7"),m.a.createElement(S["a"],{className:"w180",value:n.missionId,onChange:e=>this.changeFormEvent(e,"missionId")})),m.a.createElement("li",null,m.a.createElement(i["a"],{type:"primary",onClick:this.searchEvent.bind(this)},"\u67e5\u8be2"),m.a.createElement(i["a"],{onClick:this.clearEvent.bind(this),className:"ml10"},"\u91cd\u7f6e"))),m.a.createElement(b["a"],{dataSource:t,columns:s,rowKey:e=>e.id,pagination:a,className:"table"}))}}var P=j,f=a("dqls"),y=a("RIvz");class O extends u["Component"]{constructor(e){var t;super(e),t=this,this.isCrossAuth=d()(h.a.mark(function e(){var a;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(N["z"])();case 2:a=e.sent,a.success&&t.setState({isCrossAuthState:a.data.isCrossAuth});case 4:case"end":return e.stop()}},e)})),this.getCaQuery=(()=>{Object(N["o"])({token:this.state.token}).then(e=>{if(e.success&&void 0!==e.data){var t=(Number(e.data.withdrawCa.available_balance)+Number(e.data.settleCa.available_balance)).toFixed(2);this.setState({availableBalance:e.data.benefitCa.available_balance,settlecaBalance:t})}})}),this.loadList=(()=>{var e=this.state,t=e.pagination,a=e.search,n=e.token,s=l()({token:n,currentPage:t.currentPage,limit:t.limit},a);Object(N["y"])(s).then(e=>{var a=Object.assign(t,{total:e.total});this.setState({earningsData:e.data,pagination:a})})}),this.changePage=(e=>{e=0===e?1:e;var t=Object.assign(this.state.pagination,{currentPage:e,current:e});this.setState({pagination:t}),this.loadList()}),this.onShowSizeChange=((e,t)=>{var a=this.state.pagination;a=Object.assign(a,{currentPage:e,current:e,limit:t}),this.setState({pagination:a}),this.loadList()}),this.changeFormEvent=((e,t,a)=>{var n=this.state.search,s={};switch(e){case"dateStart":s={[e]:a};break;case"dateEnd":s={[e]:a};break;case"missionId":s={[e]:t.target.value};break;default:break}n=Object.assign(n,s),this.setState({search:n})}),this.searchEvent=(()=>{var e=Object.assign(this.state.pagination,{currentPage:1,current:1});this.setState({pagination:e}),this.loadList()}),this.clearEvent=(()=>{var e=this.state.search;e=Object.assign(e,{dateStart:null,dateEnd:null,missionId:null});var t=Object.assign(this.state.pagination,{currentPage:1,current:1});this.setState({pagination:t,search:e}),this.loadList()}),this.widthdrawEvent=(e=>{var t=this.state,a=t.isCrossAuthState,n=t.token,s=t.phone;switch(e){case 1:var i=4===a?"/authentication":"/detail";E.a.push({pathname:i,state:{token:n,phone:s}});break;case 2:2!==a?this.setState({isvisible:!0}):E.a.push({pathname:"/account",state:{token:n,phone:s}});break}}),this.cancelEvent=(()=>{this.setState({isvisible:!1})}),this.tapEvent=(e=>{this.setState({tableInd:e})}),this.state={earningsData:[],availableBalance:".",settlecaBalance:".",search:{dateStart:null,dateEnd:null,missionId:null},pagination:{size:"small",showSizeChanger:!0,total:0,currentPage:1,current:1,limit:10,onChange:this.changePage,onShowSizeChange:this.onShowSizeChange},tableInd:0}}componentDidMount(){var e=this,t=Object(y["a"])(),a=window.localStorage.getItem("token"),n=JSON.parse(window.localStorage.getItem("login_info")),s=t.token?t.token:a,i=t.phone?t.phone:n.data.phone;this.setState({token:s,phone:i},d()(h.a.mark(function t(){return h.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getCaQuery();case 2:return t.next=4,e.isCrossAuth();case 4:case"end":return t.stop()}},t)})))}render(){var e=this.state,t=e.availableBalance,a=e.settlecaBalance,r=e.tableInd,l=e.isvisible;return m.a.createElement("div",{className:p.a.arnings},m.a.createElement("header",{className:"header-style"},"\u7ed3\u7b97\u8bb0\u5f55"),m.a.createElement(n["a"],{width:350,closable:!1,visible:l,onCancel:this.cancelEvent.bind(this),footer:m.a.createElement(i["a"],{type:"primary",onClick:this.cancelEvent.bind(this)},"\u6211\u77e5\u9053\u4e86")},m.a.createElement("div",{className:p.a["tips"]},m.a.createElement("h1",{className:p.a["error"]},m.a.createElement(s["a"],{type:"close-circle",className:p.a["ico"]}),"\u65e0\u6cd5\u7533\u8bf7\u63d0\u73b0"),m.a.createElement("p",null,"\u4e3a\u786e\u4fdd\u60a8\u7684\u8d26\u6237\u5b89\u5168\uff0c\u8bf7\u5148\u8fdb\u884c\u5b9e\u540d\u8ba4\u8bc1"))),m.a.createElement("div",{className:p.a.accountAmount},m.a.createElement("div",null,m.a.createElement("div",{className:p.a.accountItems},t,m.a.createElement("h1",null,"\u8d26\u6237\u53ef\u7528\u4f59\u989d")),m.a.createElement("div",{className:p.a.lockAmount},a,m.a.createElement("h1",null,"\u63d0\u73b0\u4e2d\u91d1\u989d"))),m.a.createElement("p",null,m.a.createElement("span",{onClick:this.widthdrawEvent.bind(this,1)},"\u8ba4\u8bc1"),m.a.createElement("span",{onClick:this.widthdrawEvent.bind(this,2)},"\u63d0\u73b0"))),m.a.createElement("ul",{className:p.a.accountType},m.a.createElement("li",{className:0===r?p.a.active:null,onClick:this.tapEvent.bind(this,0)},m.a.createElement("a",null,"\u63d0\u73b0\u8bb0\u5f55")),m.a.createElement("li",{className:1===r?p.a.active:null,onClick:this.tapEvent.bind(this,1)},m.a.createElement("a",null,"\u7ed3\u7b97\u8bb0\u5f55"))),this.state.token?r?m.a.createElement(P,{token:this.state.token}):m.a.createElement(f["default"],{token:this.state.token}):"")}}t["default"]=O}}]);