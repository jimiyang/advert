(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{G52f:function(e,t,a){e.exports={card:"card___1wbmf","card-span":"card-span___1pwCI","card-msg":"card-msg___1YNNm","card-wrap":"card-wrap___1j6BI","card-p":"card-p___2-GRl","card-tag":"card-tag___3IvIt",center:"center___1lyvG",mask:"mask___IM8ud",receiptMsg:"receiptMsg___b5iZY",QRCode:"QRCode___2pHMc","modal-warning":"modal-warning___10JfD"}},TYPV:function(e,t,a){e.exports={header:"header___1I9hT",wrapp:"wrapp___50gzr",card:"card___116gA","card-p":"card-p___28Vit",btn:"btn___1b8GY","d-select":"d-select___2jBrP","d-avatar":"d-avatar___1qFBB"}},yRd8:function(e,t,a){"use strict";a.r(t);a("8NX6");var l=a("SYRA"),n=(a("0HYj"),a("1LPx")),i=(a("npa1"),a("FKy9")),s=(a("kAav"),a("tOJu")),r=(a("JWMw"),a("Y6Lv")),c=(a("Q1Sh"),a("xSYZ")),o=(a("vm15"),a("khzz")),m=(a("j8I8"),a("rgFD")),p=a("mK77"),d=a.n(p),h=(a("mRFZ"),a("JXgG")),u=(a("pDDZ"),a("83a4")),g=(a("PWbI"),a("EEhf")),E=(a("f9jU"),a("ZZoX")),f=a("TsPW"),y=a("TYPV"),v=a.n(y),k=a("2w0b"),b=a.n(k),_=a("RIvz"),w=(a("ov6h"),a("wa/u")),N=(a("ybmF"),a("yP6u")),S=(a("khvN"),a("iNs4")),I=a("Ico4"),P=a.n(I),M=a("UWy3"),C=a.n(M),A=a("g17u"),L=a("G52f"),x=a.n(L),T=a("a/LZ"),O=a.n(T),D=a("ketZ"),R=a.n(D),j=u["a"].Option,F=["","\u5934\u6761","\u4e8c\u6761","\u4e09\u6761","\u56db\u6761","\u4e94\u6761","\u516d\u6761","\u4e03\u6761","\u516b\u6761"];class Y extends k["Component"]{constructor(){var e;super(...arguments),e=this,this.state={visible:!1,appId:"",newMsgPosition:"",articlePosition:"",isSuccess:!1,planPostArticleTime:null,timeValue:null},this.receiptFail=(e=>{E["a"].error({title:"\u63a5\u5355\u5931\u8d25",content:e,okText:"\u6211\u77e5\u9053\u4e86",icon:b.a.createElement(g["a"],{type:"close-circle",theme:"filled"})})}),this.jumpPage=(()=>{this.setState({visible:!0,articlePosition:1,planPostArticleTime:null,timeValue:null})}),this.sendReceipt=(()=>{var e={};e.planPostArticleTime=this.state.planPostArticleTime?this.state.planPostArticleTime:null,e.appId=this.props.appMsg.appId,e.campaignId=this.props.item.campaignId,e.articlePosition=9===this.props.item.appArticlePosition?this.state.articlePosition:this.props.item.appArticlePosition,this.state.planPostArticleTime?9===this.props.item.appArticlePosition?this.state.articlePosition?(Object(f["db"])(d()({},e,{token:this.state.token})).then(e=>{0===e.code?this.setState({visible:!1,isSuccess:!0},()=>{this.props.refresh()}):this.receiptFail(e.message)}),this.setState({visible:!1,articlePosition:1})):h["a"].info("\u8bf7\u9009\u62e9\u4f4d\u7f6e"):Object(f["db"])(d()({},e,{token:this.state.token})).then(e=>{0===e.code?this.setState({visible:!1,isSuccess:!0,articlePosition:1},()=>{this.props.refresh()}):this.receiptFail(e.message)}):h["a"].info("\u8bf7\u9009\u62e9\u8ba1\u5212\u6295\u653e\u65e5\u671f")}),this.handleOk=function(){var t=C()(P.a.mark(function t(a){return P.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.sendReceipt();case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),this.handleCancel=(e=>{this.setState({visible:!1,isSuccess:!1,articlePosition:1})}),this.onSelect=(e=>{this.setState({articlePosition:e}),Object(f["eb"])({appId:this.props.appMsg.appId,campaignId:this.props.item.campaignId,articlePosition:e,token:this.state.token}).then(e=>{this.setState({newMsgPosition:e.data})})}),this.disabledEndDate=(e=>{var t=this.props.item,a=window.common.getDate(t.dateEnd);return e<O()().subtract(1,"day")||e>O()(new Date(a)).add(1,"day")}),this.onChangeTime=((e,t)=>{this.setState({planPostArticleTime:t,timeValue:e})})}componentDidMount(){var e=Object(_["a"])(),t=window.localStorage.getItem("token"),a=e.token?e.token:t;this.setState({token:a})}render(){var e=this.state,t=e.newMsgPosition,a=e.articlePosition,l=(e.dateStart,e.token),n=e.timeValue,i=this.props,s=i.item,r=i.isMask,o=i.appMsg,p=i.verifyTypeInfo,d=t||s;return b.a.createElement(k["Fragment"],null,b.a.createElement("div",{className:x.a.card},b.a.createElement("div",{className:x.a["card-wrap"]},b.a.createElement("img",{alt:"\u6682\u65e0\u5c01\u9762",src:s.impImage,width:"100%",height:"160px"}),b.a.createElement("div",{className:x.a["card-p"]},s.extrendJson),b.a.createElement("p",{className:x.a["card-tag"]},F[s.appArticlePosition]||"\u4e0d\u9650")),b.a.createElement("div",{className:x.a["card-msg"]},b.a.createElement("p",{style:{color:"rgb(248, 76, 39)"}},b.a.createElement("b",{style:{fontSize:18}},s.unitPrice),"/\u5143/\u9605\u8bfb"),b.a.createElement("p",null,b.a.createElement("span",{className:x.a["card-span"]},"\u9884\u4f30\u6536\u76ca\uff1a"),b.a.createElement("span",{style:{color:"rgb(248, 76, 39)"}},s.estimateMin,"~",s.estimateMax),"\u5143"),b.a.createElement("p",null,b.a.createElement("span",{className:x.a["card-span"]},"\u63a8\u5e7f\u65e5\u671f\uff1a"),b.a.createElement("span",{style:{color:"black"}},O()(s.dateStart).format("l"),"~",O()(s.dateEnd).format("l"))),b.a.createElement("p",null,b.a.createElement("span",{className:x.a["card-span"]},"\u63a8\u5e7f\u65f6\u95f4\uff1a"),b.a.createElement("span",{style:{color:"black"}},s.hourStartStr?"".concat(s.hourStartStr,"~").concat(s.hourEndStr):"\u4e0d\u9650","\uff08\u4fdd\u7559".concat(s.retentionTime,"h\uff09")))),b.a.createElement("div",{className:x.a["center"]},b.a.createElement(c["a"],{onClick:()=>this.jumpPage(),type:"primary",disabled:2!==r||!s.mayOrder,style:{width:"99.5%"}},"\u6211\u8981\u63a5\u5355"))),b.a.createElement(E["a"],{title:"\u63a5\u5355\u786e\u8ba4",visible:this.state.visible,onCancel:this.handleCancel,footer:b.a.createElement("div",{style:{textAlign:"right"}},b.a.createElement(c["a"],{type:"primary",onClick:this.handleOk},"\u786e\u8ba4\u63a5\u5355"),b.a.createElement(c["a"],{onClick:this.handleCancel},"\u53d6\u6d88"))},b.a.createElement("p",{className:x.a["modal-warning"]},b.a.createElement(g["a"],{type:"info-circle",theme:"filled",style:{color:"#6644dd",marginRight:10}}),"\u8bf7\u6309\u63a5\u5355\u8981\u6c42\u3001\u5728\u300c\u7c89\u4e1d\u6c47\u300d\u5e73\u53f0\u7fa4\u53d1\u63a5\u5355\u6587\u6848\uff0c\u4ee5\u514d\u5f71\u54cd\u6536\u76ca\u7ed3\u7b97"),b.a.createElement(w["a"],{type:"flex"},b.a.createElement(N["a"],{span:12},b.a.createElement("div",{className:x.a["receiptMsg"]},b.a.createElement("label",null,"\u63a5\u5355\u516c\u4f17\u53f7\uff1a"),b.a.createElement("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},b.a.createElement(m["a"],{src:o.headImg,style:{backgroundColor:this.state.color,verticalAlign:"middle"},size:"small"}),b.a.createElement("span",{style:{marginLeft:10,verticalAlign:"middle"}},o.nickName))),b.a.createElement("div",{className:x.a["receiptMsg"]},b.a.createElement("label",null,"\u6587\u7ae0\u4f4d\u7f6e\uff1a"),b.a.createElement("div",null,9===s.appArticlePosition?b.a.createElement(u["a"],{placeholder:"\u8bf7\u9009\u62e9\u4f4d\u7f6e",style:{width:120},value:a,onChange:this.onSelect,size:"small"},F.map((e,t)=>{return t>0?b.a.createElement(j,{value:t,key:t},e):""})):F[s.appArticlePosition])),b.a.createElement("div",{className:x.a["receiptMsg"]},b.a.createElement("label",null,"\u8ba1\u5212\u6295\u653e\u65e5\u671f\uff1a"),b.a.createElement("div",null,b.a.createElement(S["a"],{className:"w120",format:"YYYY-MM-DD",disabledDate:this.disabledEndDate,onChange:this.onChangeTime,value:n}))),b.a.createElement("div",{className:x.a["receiptMsg"]},b.a.createElement("label",null,"\u5907\u6ce8\uff1a"),b.a.createElement("div",null,d.adRemarks?s.adRemarks:"\u65e0")),b.a.createElement("div",{className:x.a["receiptMsg"]},b.a.createElement("label",null,"\u9884\u8ba1\u4e3a\u60a8\u8d5a\u53d6\uff1a"),b.a.createElement("div",null,b.a.createElement("span",null,"".concat(d.estimateMin,"\u5143 ~ ").concat(d.estimateMax,"\u5143   ").concat(d.remarks?d.remarks:""))))),b.a.createElement(N["a"],{span:12},b.a.createElement("div",{className:x.a["QRCode"]},b.a.createElement("p",null,"\u5fae\u4fe1\u626b\u7801\u624b\u673a\u9884\u89c8\u6587\u6848"),b.a.createElement(R.a,{value:"".concat(window.common.articleUrl,"/fshstatic/view.html?id=").concat(s.postContent),size:135,fgColor:"#000000"}))))),b.a.createElement(E["a"],{title:b.a.createElement("div",null,b.a.createElement(g["a"],{style:{color:"rgb(82, 196, 27)",marginRight:15},type:"check-circle",theme:"filled"}),"\u63a5\u5355\u6210\u529f"),visible:this.state.isSuccess,onCancel:this.handleCancel,footer:b.a.createElement("div",{style:{textAlign:"right"}},1*p===-1?b.a.createElement(c["a"],{type:"primary",onClick:()=>{this.props.history.push({pathname:"/step",state:{appMsg:o,token:l}})}},"\u67e5\u770b\u63a8\u6587\u6d41\u7a0b"):b.a.createElement(b.a.Fragment,null,b.a.createElement(c["a"],{type:"primary",onClick:this.handleCancel},"\u7ee7\u7eed\u63a5\u5355"),b.a.createElement(c["a"],{onClick:()=>{window.location.href.includes("test")?window.top.location.href="http://test.fensihui.com/fshstatic/localArticleList":window.top.location.href="http://houtai.fensihui.com/fshstatic/localArticleList"}},"\u524d\u5f80\u6587\u5e93")))},1*p===-1?b.a.createElement("p",null,b.a.createElement("em",{className:"red-color"},"\u672a\u8ba4\u8bc1\u53f7"),"\u8ba2\u5355\u5df2\u751f\u6210 \uff0c\u8bf7\u6309\u8bbe\u5b9a\u7684\u65e5\u671f\u524d\u5f80\u5fae\u4fe1\u516c\u4f17\u5e73\u53f0\u5b8c\u6210\u63a8\u6587\uff0c\u5e76\u5728\u201c\u63a5\u5355\u8bb0\u5f55\u201d\u5217\u8868\u4e2d\u63d0\u4ea4\u5fae\u4fe1\u6587\u7ae0\u94fe\u63a5\uff0c\u8d85\u8fc7\u8ba1\u5212\u6295\u653e\u65e5\u671f",b.a.createElement("em",{className:"red-color"},"36\u5c0f\u65f6"),"\u4ecd\u672a\u63a8\u6587\u8ba2\u5355\u4f1a\u81ea\u52a8\u53d6\u6d88\uff1b\u8d85\u8fc7\u5e7f\u544a\u4e3b\u8981\u6c42\u7684\u63a8\u5e7f\u65e5\u671f\u63a8\u6587\u4ea6\u5c06\u65e0\u6548\u3002"):b.a.createElement("p",null,"\u8ba2\u5355\u5df2\u751f\u6210\uff0c\u6587\u6848\u5df2\u4fdd\u5b58\u5728\u300c",b.a.createElement("em",{className:"red-color"},"\u672c\u5730\u6587\u5e93"),"\u300d\uff0c\u8bf7\u6309\u8bbe\u5b9a\u7684\u65e5\u671f\u5728\u300c\u7c89\u4e1d\u6c47\u300d\u5e73\u53f0\u5b8c\u6210\u63a8\u6587\u3002\u8d85\u8fc7\u8ba1\u5212\u6295\u653e\u65e5\u671f",b.a.createElement("em",{className:"red-color"},"36\u5c0f\u65f6"),"\u4ecd\u672a\u63a8\u6587\u8ba2\u5355\u4f1a\u81ea\u52a8\u53d6\u6d88\uff1b\u8d85\u8fc7\u5e7f\u544a\u4e3b\u8981\u6c42\u7684\u63a8\u5e7f\u65e5\u671f\u63a8\u6587\u4ea6\u5c06\u65e0\u6548\u3002")))}}var z=Object(A["o"])(Y);function V(){E["a"].info({title:"\u6570\u636e\u66f4\u65b0\u4e2d\u2026\u2026",content:b.a.createElement("div",null,b.a.createElement("p",null,"\u540e\u53f0\u6b63\u5728\u66f4\u65b0\u8be5\u516c\u4f17\u53f7\u7684\u7c89\u4e1d\u6570\u636e\u548c\u9884\u4f30\u9605\u8bfb\u6570\u636e\uff0c\u8bf7\u7a0d\u540e\u518d\u6765\u63a5\u5355\u54e6\uff01")),onOk(){},icon:b.a.createElement(g["a"],{type:"exclamation-circle",theme:"filled",style:{color:"#6644dd"}}),okText:"\u6211\u77e5\u9053\u4e86"})}var Z=u["a"].Option;class G extends k["Component"]{constructor(){super(...arguments),this.state={appList:[],defaultApp:"",token:"",mayOrder:0,currentPage:1,limit:10,receiptList:[],isMask:"",totalNum:0,current:1,appMessage:{},num:0,syncLoading:!1,isColon:!1,verifyTypeInfo:null,defaultName:null},this.getList=(e=>{var t=0;t=e||1;var a={};if(a.appId=this.state.defaultApp,a.token=this.state.token,a.currentPage=t,a.limit=10,a.mayOrder=this.state.mayOrder,a.unitPriceSort=this.state.num,null===a.appId)return h["a"].error("\u8bf7\u9009\u62e9\u516c\u4f17\u53f7"),!1;this.setState({syncLoading:!0}),Object(f["x"])(d()({},a)).then(e=>{0===e.code?this.setState({receiptList:e.data.items,totalNum:e.data.totalNum,current:t}):400001===e.code&&V(),this.setState({syncLoading:!1})})}),this.onChange=(e=>{this.setState({mayOrder:e.target.checked?1:0,syncLoading:!0},()=>{this.getList()})}),this.handleSubmit=(e=>{e.preventDefault(),this.props.form.validateFields((e,t)=>{if(!e){var a={};for(var l in t)t[l]&&(a[l]=t[l]);a.mayOrder=this.state.mayOrder,a.appId=this.state.defaultApp,Object(f["x"])(d()({},a,{token:this.state.token,currentPage:1,limit:10})).then(e=>{0===e.code&&this.setState({receiptList:e.data.items,totalNum:e.data.totalNum,current:1})})}})})}componentDidMount(){var e=Object(_["a"])(),t=window.localStorage.getItem("token"),a=e.token?e.token:t,l=this.props.form.setFieldsValue;Object(f["h"])({token:a}).then(e=>{0===e.code&&this.setState({token:a,defaultApp:e.data.length?e.data[0].appId:null,defaultName:e.data.length?e.data[0].nickName:null,appList:e.data,isMask:e.data.length?e.data[0].status:"",appMessage:e.data.length?e.data[0]:[],verifyTypeInfo:e.data.length?e.data[0].verifyTypeInfo:null},()=>{l({appId:this.state.defaultName}),this.state.defaultApp?this.getList():this.setState({syncLoading:!1})})})}render(){var e=this.props.form.getFieldDecorator,t=this.state,a=t.appList,p=t.receiptList,d=t.isMask,h=t.totalNum,E=t.current,f=t.defaultApp,y=t.appMessage,k=t.num,_=t.syncLoading,w=t.isColon,N=t.verifyTypeInfo;return b.a.createElement("div",{className:v.a.wrapp},b.a.createElement("header",{className:"header-style"},"\u53ef\u63a5\u8ba2\u5355"),b.a.createElement("p",{className:"tip-circle"},b.a.createElement(g["a"],{type:"info-circle",className:"ico",theme:"filled"}),"\u8ba4\u8bc1\u53f7\u8bf7\u52a1\u5fc5\u5728\u201c\u7c89\u4e1d\u6c47\u201d\u53d1\u6587\uff0c\u672a\u8ba4\u8bc1\u53f7\u5728\u5fae\u4fe1\u516c\u4f17\u5e73\u53f0\u53d1\u6587\u540e\u8bf7\u52a1\u5fc5\u63d0\u4ea4\u5fae\u4fe1\u6587\u7ae0\u94fe\u63a5\uff0c\u5426\u5219\u672c\u5e73\u53f0\u6709\u6743\u4e0d\u4e88\u7ed3\u7b97\u3002"),b.a.createElement("p",{className:"tip-circle"},b.a.createElement(g["a"],{type:"info-circle",className:"ico",theme:"filled"}),"\u4ec5\u5728\u5e7f\u544a\u4e3b\u8981\u6c42\u7684\u63a8\u5e7f\u65e5\u671f\u5185\u53ef\u4ee5\u63a5\u5355\uff0c\u4e14\u63a5\u5355\u8d26\u53f7\u4e0e\u5e7f\u544a\u4e3b\u7684\u63a8\u5e7f\u8981\u6c42\u4e0d\u5339\u914d\u65f6\u65e0\u6cd5\u63a5\u5355\u3002"),b.a.createElement("div",{className:"".concat(v.a.header," mt30")},b.a.createElement(o["a"],{layout:"inline",onSubmit:this.handleSubmit},b.a.createElement(o["a"].Item,{label:"\u516c\u4f17\u53f7",colon:w},e("appId")(b.a.createElement(u["a"],{showSearch:!0,style:{width:200,height:30},placeholder:"\u6682\u65e0\u516c\u4f17\u53f7"},a.length?a.map((e,t)=>{return b.a.createElement(Z,{onClick:()=>{this.setState({isMask:e.status,appMessage:e,verifyTypeInfo:e.verifyTypeInfo,defaultApp:e.appId},()=>{this.getList()})},value:e.nickName,key:t},b.a.createElement("div",{className:v.a["d-select"]},b.a.createElement(m["a"],{className:v.a["d-avatar"],size:"small",src:e.headImg}),b.a.createElement("span",null,e.nickName)))}):"")),f?b.a.createElement("span",{style:{color:"red",marginLeft:15,marginRight:15,display:"inline-block"}},2===d?"":"\u516c\u4f17\u53f7\u5f85\u5ba1\u6838\uff0c\u4e0d\u53ef\u63a5\u5355"):""),b.a.createElement(o["a"].Item,{label:"\u6392\u5e8f",colon:w},b.a.createElement("div",{className:"inlineb"},e("unitPrice")(b.a.createElement(c["a"],{className:v.a.btn,onClick:()=>{var e=k;e++,e>2&&(e=0),this.setState({num:e},()=>{this.getList()})}},"\u5355\u4ef7",b.a.createElement("span",null,b.a.createElement("span",{style:{display:"flex",flexDirection:"column",marginLeft:7}},b.a.createElement(g["a"],{type:"caret-up",style:1===k?{color:"rgb(102, 68, 221)"}:{}}),b.a.createElement(g["a"],{type:"caret-down",style:2===k?{color:"rgb(102, 68, 221)"}:{}}))))))),b.a.createElement(o["a"].Item,null,b.a.createElement(r["a"],{onClick:this.onChange},"\u53ea\u6709\u53ef\u63a5\u5355\u6d3b\u52a8")))),b.a.createElement("div",{className:v.a.main},b.a.createElement(n["a"],{spinning:_},p.length?b.a.createElement(s["a"],{grid:{gutter:16,xs:1,sm:2,md:2,lg:3,xl:3,xxl:4},className:"list-tab",dataSource:p,renderItem:(e,t)=>b.a.createElement(s["a"].Item,null,b.a.createElement(z,{isMask:d,key:t,item:e,appMsg:y,verifyTypeInfo:N,refresh:()=>{this.setState({syncLoading:!0},()=>{this.getList()})}}))}):b.a.createElement(i["a"],{image:i["a"].PRESENTED_IMAGE_SIMPLE}))),p.length?b.a.createElement(l["a"],{simple:!0,current:E,total:h,onChange:e=>{this.getList(e)}}):"")}}t["default"]=o["a"].create({name:"ReceiptPage"})(G)}}]);