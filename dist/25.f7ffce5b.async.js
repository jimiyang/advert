(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[25],{A6Go:function(e,t,a){"use strict";a.r(t);a("K9jA");var s=a("ekpG"),i=(a("Q1Sh"),a("xSYZ")),n=(a("dQQm"),a("2o49")),r=(a("H2sK"),a("ydYK")),c=(a("PrJT"),a("Vhqn")),l=(a("0dlH"),a("MfyD")),o=(a("PWbI"),a("EEhf")),h=(a("Mzdm"),a("beTn")),m=(a("f9jU"),a("ZZoX")),g=(a("mRFZ"),a("JXgG")),d=a("Ico4"),p=a.n(d),u=a("mK77"),v=a.n(u),E=a("UWy3"),b=a.n(E),k=a("2w0b"),y=a.n(k),f=a("2Qu+"),w=a.n(f),N=a("h+Wj"),S=a.n(N),C=a("nD7b"),T=a("TsPW");class I extends k["Component"]{constructor(e){var t;super(e),t=this,this.loadList=b()(p.a.mark(function e(){var a,s,i,n;return p.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.state,s=a.pagination,i=a.search,n=v()({},i,{limit:s.pageSize,currentPage:s.currentPage,current:s.currentPage}),t.setState({loading:!0}),e.next=5,Object(T["b"])(n).then(e=>{if(t.setState({loading:!1}),e.success){var a=Object.assign(s,{total:e.data.totalNum});t.setState({activityData:e.data.items,pagination:a})}});case 5:case"end":return e.stop()}},e)})),this.getSettleData=(e=>{var t=[];return void 0===e&&0===e.length||e.map(e=>{13===e.missionStatus&&t.push(e)}),t}),this.changePage=(e=>{e=0===e?1:e;var t=Object.assign(this.state.pagination,{currentPage:e,current:e});this.setState({pagination:t,ischecked:!1,allchk:!1}),this.loadList()}),this.onShowSizeChange=((e,t)=>{var a=this.state.pagination;a=Object.assign(a,{currentPage:e,current:e,pageSize:t}),this.setState({pagination:a,ischecked:!1,allchk:!1}),this.loadList()}),this.changeFormEvent=((e,t,a)=>{var s=this.state.search,i={};switch(t){case"nickName":i={[t]:e.target.value};break;default:i={[t]:e.target.value};break}s=Object.assign(s,i),this.setState({search:s})}),this.searchEvent=(()=>{var e=Object.assign(this.state.pagination,{currentPage:1,current:1});this.setState({pagination:e}),this.loadList()}),this.clearEvent=(()=>{var e=this.state.search;e=Object.assign(e,{nickName:null,isBlack:null});var t=Object.assign(this.state.pagination,{currentPage:1,current:1});this.setState({search:e,pagination:t}),this.loadList()}),this.viewDataEvent=(e=>{var t=this.state.loginName,a={limit:10,loginName:t,missionId:e.missionId};Object(T["P"])(a).then(e=>{e.success&&this.setState({readData:e.data,isVisible:!0})})}),this.onSelectChange=(e=>{this.setState({selectedRowKeys:e})}),this.batchAudit=(e=>{var t=this.state.selectedRowKeys;Object(T["n"])(e).then(e=>{e.success&&(g["a"].success(e.data),this.setState({selectedRowKeys:[]}),t.length=0,this.loadList())})}),this.getCheckIsBlack=function(){var e=b()(p.a.mark(function e(a){var s;return p.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=!1,e.next=3,Object(T["q"])({appIdList:a}).then(e=>{e.success&&e.data&&(t.info(),s=!0)});case 3:return e.abrupt("return",s);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.info=(e=>{var t="y"===e?"\u65e0\u6cd5\u5ba1\u6838\u8be5\u516c\u4f17\u53f7":"\u65e0\u6cd5\u6279\u91cf\u5ba1\u6838\u516c\u4f17\u53f7",a="y"===e?"\u5f53\u524d\u516c\u4f17\u53f7\u5df2\u88ab\u52a0\u5165\u9ed1\u540d\u5355\uff0c\u65e0\u6cd5\u5ba1\u6838\uff0c\u8bf7\u5148\u5c06\u8be5\u516c\u4f17\u53f7\u79fb\u51fa\u9ed1\u540d\u5355\u518d\u5ba1\u6838":"\u6279\u91cf\u9009\u62e9\u7684\u516c\u4f17\u53f7\u4e2d\u5305\u542b\u9ed1\u540d\u5355\u516c\u4f17\u53f7\uff0c\u8bf7\u5148\u5c06\u516c\u4f17\u53f7\u79fb\u51fa\u9ed1\u540d\u5355\u6216\u5728\u6279\u91cf\u9009\u62e9\u4e2d\u53d6\u6d88\u9009\u62e9\u9ed1\u540d\u5355\u516c\u4f17\u53f7";m["a"].error({title:t,content:y.a.createElement("div",{className:"f12"},y.a.createElement("p",null,a)),onOk(){},okText:"\u6211\u77e5\u9053\u4e86"})}),this.checkEvent=(()=>{var e=this.state.selectedRowKeys;if(0===e.length)return g["a"].error("\u8bf7\u9009\u62e9\u8981\u5ba1\u6838\u7684\u516c\u4f17\u53f7"),!1;this.getCheckIsBlack(e).then(t=>{if(!t){var a={appIdList:e};this.batchAudit(a)}})}),this.singlecheckEvent=((e,t)=>{if(1===t)return this.info("y"),!1;this.batchAudit({appIdList:[e]})}),this.openNotification=((e,t)=>{h["a"].open({message:y.a.createElement("span",{className:"f14"},"\u516c\u4f17\u53f7",0===e?"\u79fb\u51fa":"\u52a0\u5165","\u9ed1\u540d\u5355\u8bbe\u7f6e\u5b8c\u6210"),description:t,duration:5,icon:y.a.createElement(o["a"],{type:"info-circle",theme:"filled",className:"purple-color"})})}),this.accountBlackEvent=(e=>{var t=this.state.selectedRowKeys,a=0===e?"\u8bf7\u9009\u62e9\u8981\u79fb\u51fa\u9ed1\u540d\u5355\u7684\u516c\u4f17\u53f7":"\u8bf7\u9009\u62e9\u8981\u52a0\u5165\u9ed1\u540d\u5355\u7684\u516c\u4f17\u53f7";if(0===t.length)return g["a"].error(a),!1;var s={appIdList:t,isBlack:e};Object(T["vb"])(s).then(a=>{if(a.success){var s=y.a.createElement("span",{className:"f12"},"\u6210\u529f",y.a.createElement("em",{className:"purple-color m5 bold"},a.data.successNum),"\u4e2a, \u5931\u8d25",y.a.createElement("em",{className:"purple-color m5 bold"},a.data.failureNum),"\u4e2a");this.openNotification(e,s),this.setState({selectedRowKeys:[]}),t.length=0,this.loadList()}})}),this.setTargetEvent=((e,t)=>{var a,s=this.state.form,i={};switch(e){case 1:a={areaVisible:!0},i={targetArea:t.targetAreaList};break;case 2:a={tagVisible:!0},i={targetMediaCategory:t.wechatAccountTypeList};break}s=Object.assign(s,i,{appId:t.appId}),this.setState(v()({},a,{form:s}))}),this.updateTag=(e=>{var t=this.state.form,a=2===e?{wechatAccountTypeList:t.targetMediaCategory}:{targetAreaList:t.targetArea},s=v()({appIdList:[t.appId]},a,{tagType:e});Object(T["nb"])(s).then(e=>{e.success&&(g["a"].success(e.message),this.loadList())})}),this.getIndexTag=((e,t,a)=>{var s=this.state.form,i="parent_mediatype"===a?"targetMediaCategory":"targetArea";s=Object.assign(s,{[i]:e}),this.setState({form:s,dictData:t})}),this.getDictionary=(e=>{var t=this.state,a=t.form,s=t.dictData,i=[],n={},r=2===e?a.targetMediaCategory:a.targetArea;r.map(e=>{s.map(t=>{e===t.value&&i.push(t.label)})}),n=2===e?{selCategoryData:i,tagVisible:!1}:{selAreaData:i,areaVisible:!1},this.setState(v()({},n)),this.updateTag(e)}),this.closeEvent=(()=>{this.setState({isVisible:!1,areaVisible:!1,tagVisible:!1})}),this.selTagEvent=(e=>{var t=this.state.search;t=Object.assign(t,{isBlack:e}),this.setState({search:t},()=>{this.loadList()})}),this.state={loginName:null,search:{nickName:null,isBlack:null},pagination:{size:"small",pageSize:10,currentPage:1,current:1,total:0,showSizeChanger:!0,onChange:this.changePage,onShowSizeChange:this.onShowSizeChange},activityData:[],selectedRowKeys:[],allchk:!1,ischecked:[],isDisabled:!1,isSubmit:!1,placement:"right",isVisible:!1,missionTotal:0,missionNotRelease:0,readData:[],areaVisible:!1,tagVisible:!1,form:{targetMediaCategory:[],targetArea:[]},loading:!1,blackData:[{id:null,name:"\u5168\u90e8"},{id:0,name:"\u767d\u540d\u5355"},{id:1,name:"\u9ed1\u540d\u5355"}]}}componentDidMount(){var e=this;return b()(p.a.mark(function t(){var a;return p.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=JSON.parse(window.localStorage.getItem("login_info")),t.next=3,e.setState({loginName:a.data.loginName});case 3:e.loadList();case 4:case"end":return t.stop()}},t)}))()}render(){var e=this.state,t=e.search,a=e.activityData,h=e.pagination,g=e.isDisabled,d=e.areaVisible,p=e.tagVisible,u=e.form,v=e.loading,E=e.blackData,b=y.a.createElement("ul",{className:w.a["select-txt"]},E.map((e,t)=>y.a.createElement("li",{className:"cur",key:t,onClick:()=>this.selTagEvent(e.id)},e.name))),k=[{title:y.a.createElement("div",null,"\u516c\u4f17\u53f7",y.a.createElement(l["a"],{placement:"bottom",content:b,trigger:"click"},y.a.createElement(o["a"],{type:"funnel-plot",theme:"filled",className:"cur m5 f14"}))),key:"headImg",render:e=>y.a.createElement("div",null,y.a.createElement("img",{src:e.headImg,style:{width:"60px",height:"60px"}}),y.a.createElement("span",{className:"ml10"},e.nickName,1===Number(e.isBlack)?y.a.createElement(c["a"],{title:"\u5e73\u53f0\u9ed1\u540d\u5355\u8d26\u53f7\uff0c\u6240\u6709\u5546\u6237\u4e0b\u7684\u5e7f\u544a\u5747\u4e0d\u53ef\u63a5"},y.a.createElement(o["a"],{type:"exclamation-circle",className:"red-color ml10"})):""))},{title:"\u6388\u6743\u65f6\u95f4",key:"authDate",render:e=>y.a.createElement("div",null,window.common.getDate(e.authDate,!0))},{title:"\u7c7b\u578b",key:"serviceTypeInfo",render:e=>y.a.createElement("div",null,0===Number(e.serviceTypeInfo)||1===Number(e.serviceTypeInfo)?"\u8ba2\u9605\u53f7":"\u670d\u52a1\u53f7")},{title:"\u8ba4\u8bc1\u4fe1\u606f",key:"verifyTypeInfo",render:e=>y.a.createElement("div",null,-1===e.verifyTypeInfo?"\u672a\u8ba4\u8bc1":"\u5df2\u8ba4\u8bc1")},{title:"\u7c89\u4e1d\u91cf",key:"userTotal",render:e=>y.a.createElement("div",null,e.userTotal?e.userTotal:y.a.createElement(c["a"],{placement:"top",title:"\u7531\u4e8e\u5fae\u4fe1\u9650\u5236\uff0c\u672a\u8ba4\u8bc1\u53f7\u8bf7\u5230\u5fae\u4fe1\u540e\u53f0\u67e5\u770b\u7c89\u4e1d\u6570"},e.appTotalUserCnt?e.appTotalUserCnt:"--"))},{title:"\u72b6\u6001",key:"missionReadCnt",render:e=>y.a.createElement("div",null,window.common.weChatstatus[Number(e.status)-1])},{title:"\u64cd\u4f5c",key:"adEstimateCost",width:120,render:e=>y.a.createElement("div",null,y.a.createElement("span",{className:"block purple-color cur",onClick:()=>this.setTargetEvent(1,e)},"\u8bbe\u7f6e\u5730\u57df"),y.a.createElement("span",{className:"block purple-color cur",onClick:()=>this.setTargetEvent(2,e)},"\u8bbe\u7f6e\u5206\u7c7b"),1===Number(e.status)?y.a.createElement(r["a"],{title:"\u786e\u8ba4\u8981\u3010\u901a\u8fc7\u3011\u8fd9\u6761\u4fe1\u606f\u5417?",onConfirm:()=>this.singlecheckEvent(e.appId,e.isBlack),okText:"\u662f",cancelText:"\u5426"},y.a.createElement("span",{className:"block purple-color cur"},"\u5ba1\u6838\u901a\u8fc7")):null,y.a.createElement(S.a,{to:{pathname:"/accountView",state:{appId:e.appId}}},"\u8be6\u60c5"))}],f={onChange:this.onSelectChange},N=document.body.offsetHeight-130-250;return y.a.createElement("div",{className:w.a.administrator},y.a.createElement("header",{className:"header-style"},"\u516c\u4f17\u53f7\u5217\u8868"),y.a.createElement(m["a"],{visible:d,width:700,onCancel:this.closeEvent,onOk:()=>this.getDictionary(1)},y.a.createElement(C["a"],{type:"provinceType",atype:"account",getIndexTag:this.getIndexTag,tagData:u.targetArea})),y.a.createElement(m["a"],{visible:p,width:500,onCancel:this.closeEvent,onOk:()=>this.getDictionary(2)},y.a.createElement(C["a"],{type:"parent_mediatype",atype:"account",parent:"parent",getIndexTag:this.getIndexTag,tagData:u.targetMediaCategory})),y.a.createElement("ul",{className:w.a.search},y.a.createElement("li",null,"\u516c\u4f17\u53f7\u540d\u79f0",y.a.createElement(n["a"],{className:w.a["ml10"],value:t.nickName,onChange:e=>this.changeFormEvent(e,"nickName")})),y.a.createElement("li",null,y.a.createElement(i["a"],{type:"primary",onClick:()=>this.searchEvent()},"\u67e5\u8be2"),y.a.createElement(i["a"],{className:"ml10",onClick:()=>this.clearEvent()},"\u91cd\u7f6e"))),y.a.createElement("div",{className:w.a.all},y.a.createElement(i["a"],{className:"mr10",onClick:()=>this.accountBlackEvent(1)},"\u52a0\u5165\u9ed1\u540d\u5355"),y.a.createElement(i["a"],{type:"primary",className:"mr10",onClick:()=>this.accountBlackEvent(0)},"\u79fb\u51fa\u9ed1\u540d\u5355"),y.a.createElement(r["a"],{title:"\u662f\u5426\u6279\u91cf\u5ba1\u6838\u516c\u4f17\u53f7?",onConfirm:()=>this.checkEvent(),okText:"\u662f",cancelText:"\u5426"},y.a.createElement(i["a"],{type:"primary",disabled:g},"\u6279\u91cf\u5ba1\u6838\u516c\u4f17\u53f7"))),y.a.createElement(s["a"],{dataSource:a,columns:k,pagination:h,rowSelection:f,rowKey:e=>e.appId,loading:v,scroll:{y:N},className:"mt20"}))}}t["default"]=I}}]);