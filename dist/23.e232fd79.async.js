(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[23],{ovi6:function(e,a,t){"use strict";t.r(a);t("K9jA");var s=t("ekpG"),n=(t("dQQm"),t("2o49")),i=(t("f9jU"),t("ZZoX")),l=(t("Q1Sh"),t("xSYZ")),r=(t("0dlH"),t("MfyD")),c=(t("mRFZ"),t("JXgG")),o=(t("Mzdm"),t("beTn")),m=t("Ico4"),h=t.n(m),d=t("mK77"),u=t.n(d),p=t("UWy3"),g=t.n(p),E=(t("pDDZ"),t("83a4")),v=t("2w0b"),S=t.n(v),b=t("2Qu+"),N=t.n(b),w=t("h+Wj"),D=t.n(w),k=t("TsPW"),y=t("zefA"),C=t("+JnQ"),f=t.n(C),I=E["a"].Option,P=[];class V extends v["Component"]{constructor(e){var a;super(e),a=this,this.loadList=g()(h.a.mark(function e(){var t,s,n,i;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.state,s=t.pagination,n=t.search,i=u()({currentPage:s.currentPage,limit:s.pageSize},n),a.setState({loading:!0}),e.next=5,Object(k["V"])(i).then(e=>{if(a.setState({loading:!1}),e.success){var t=Object.assign(s,{total:e.data.totalNum});a.setState({activityData:e.data.items,pagination:t,ischecked:new Array(s.pageSize)})}});case 5:case"end":return e.stop()}},e)})),this.getSettleData=(e=>{var a=[];return void 0===e&&0===e.length||e.map(e=>{13===e.missionStatus&&a.push(e)}),a}),this.changePage=(e=>{e=0===e?1:e;var a=Object.assign(this.state.pagination,{currentPage:e,current:e});this.setState({pagination:a,ischecked:!1,allchk:!1}),this.loadList()}),this.onShowSizeChange=((e,a)=>{var t=this.state.pagination;t=Object.assign(t,{currentPage:e,current:e,pageSize:a}),this.setState({pagination:t,ischecked:!1,allchk:!1}),this.loadList()}),this.changeFormEvent=((e,a)=>{var t=this.state.search,s={};switch(a){case"missionStatus":s={[a]:e};break;default:s={[a]:e.target.value};break}t=Object.assign(t,s),this.setState({search:t})}),this.searchEvent=(()=>{var e=Object.assign(this.state.pagination,{currentPage:1,current:1});this.setState({pagination:e}),this.loadList()}),this.clearEvent=(()=>{var e=this.state.search;e=Object.assign(e,{flowMerchantCode:null,adMerchantCode:null,campaignId:null,appNickName:null,missionStatus:null,missionId:null});var a=Object.assign(this.state.pagination,{currentPage:1,current:1});this.setState({search:e,pagination:a}),this.loadList()}),this.onSelectChange=(e=>{var a=this.state,t=a.activityData,s=a.ischecked,n=[];!0===e.target.checked?(n=this.getSettleData(t),t.map((e,a)=>{s[a]=!0})):(t.map((e,a)=>{s[a]=!1}),n=[]),this.setState({allchk:e.target.checked,selectedRowKeys:n})}),this.openNotification=(e=>{o["a"].info({message:"\u7ed3\u7b97\u72b6\u6001",description:e,duration:10})}),this.settleEvent=(e=>{var a=this.state.loginName,t={settleMissions:[{missionId:e.missionId,settleReadCnt:e.settleReadCnt}],loginName:a};if(this.setState({isSubmit:!0}),!0===this.state.isSubmit)return c["a"].error("\u8bf7\u52ff\u91cd\u590d\u7ed3\u7b97!"),!1;Object(k["pb"])(t).then(e=>{var a,t="";e.data[0].success?(t="green-color",a="".concat(e.data[0].data)):(t="red-color",a="".concat(e.data[0].data)),this.openNotification(S.a.createElement("div",null,S.a.createElement("p",{className:"".concat(t)},a)));var s=Object.assign(this.state.pagination,{currentPage:1,current:1});this.setState({pagination:s,isSubmit:!1}),this.loadList()})}),this.singleEvent=((e,a,t)=>{var s=this.state.ischecked;!0===t.target.checked?(P[a]=e,s[a]=!0):(P.splice(a,1),s[a]=!1),this.setState({ischecked:s,allchk:!1,selectedRowKeys:P})}),this.batchSettleEvent=(()=>{var e=this.state,a=e.selectedRowKeys,t=e.loginName,s=[];if(a.map(e=>{s.push({missionId:e.missionId,settleReadCnt:e.settleReadCnt,title:e.adCampaign.advertiserName})}),0===a.length)return c["a"].error("\u8bf7\u9009\u62e9\u9700\u8981\u7ed3\u7b97\u7684\u6570\u636e"),!1;this.setState({isDisabled:!0});var n={loginName:t,settleMissions:s},i=[];Object(k["pb"])(n).then(e=>{if(this.setState({isDisabled:!1}),e.data.length>0){e.data.map((e,a)=>{e.success?i.push(S.a.createElement("p",{key:a,className:"green-color"},e.data)):i.push(S.a.createElement("p",{className:"red-color"},e.data))}),this.openNotification(S.a.createElement("div",null,i));var a=Object.assign(this.state.pagination,{currentPage:1,current:1});this.setState({pagination:a}),this.loadList()}})}),this.viewDataEvent=(e=>{var a={missionId:e.missionId};Object(k["P"])(a).then(e=>{e.success&&this.setState({readData:e.data.items})})}),this.closeEvent=(()=>{this.setState({isVisible:!1})}),this.handleHoverChange=((e,a)=>{var t;!0===a&&(this.viewDataEvent(e),t=e.id),this.setState({hovered:t})}),this.cancelMissionEvent=(e=>{var a=this.state,t=a.search,s=a.pagination;t=Object.assign(t,{flowMerchantCode:null,adMerchantCode:null,campaignId:null,appNickName:null,missionStatus:null}),s=Object.assign(s,{currentPage:1,current:1}),Object(k["xb"])({id:e,missionStatus:19}).then(e=>{e.success&&(c["a"].success(e.message),this.setState({pagination:s,search:t},()=>{this.loadList()}))})}),this.viewMonitorEvent=(e=>{Object(k["W"])({missionId:e.missionId}).then(a=>{if(a.success){var t=a.data;this.setState({xData:t.xData,yReadUserVal:t.yReadUserVal,yReadUserData:t.yReadUserData,yDifVal:t.yDifVal,yDifValData:t.yDifValData,alias:t.alias,realPostArticleTime:t.realPostArticleTime,monitorDateStart:t.monitorDateStart,monitorDateEnd:t.monitorDateEnd,isChartsVisible:!0,missionItems:e,monitorStatus:t.monitorStatus})}})}),this.closeEvent=(()=>{this.setState({isChartsVisible:!1})}),this.state={loginName:null,search:{dateStart:null,dateEnd:null,missionStatus:null,campaignName:null,missionId:null},pagination:{size:"small",pageSize:10,currentPage:1,current:1,total:0,showSizeChanger:!0,onChange:this.changePage,onShowSizeChange:this.onShowSizeChange},activityData:[],selectedRowKeys:[],allchk:!1,ischecked:[],isDisabled:!1,isSubmit:!1,placement:"right",isVisible:!1,missionTotal:0,missionNotRelease:0,readData:[],hovered:"",isChartsVisible:!1,loading:!1}}componentDidMount(){var e=this;return g()(h.a.mark(function a(){return h.a.wrap(function(a){while(1)switch(a.prev=a.next){case 0:e.loadList();case 1:case"end":return a.stop()}},a)}))()}render(){var e=this.state,a=e.search,t=e.activityData,c=e.pagination,o=(e.allchk,e.ischecked,e.isDisabled,e.placement,e.isVisible,e.missionTotal,e.missionNotRelease,e.isChartsVisible),m=e.readData,h=e.hovered,d=e.missionItems,u=e.xData,p=e.yReadUserVal,g=e.yReadUserData,v=e.yDifVal,b=e.yDifValData,w=e.alias,k=e.realPostArticleTime,C=e.monitorDateStart,P=e.monitorDateEnd,V=e.monitorStatus,R=e.loading,j=S.a.createElement("dl",{className:N.a["drawer"]},S.a.createElement("dt",null,S.a.createElement("span",null,"\u65e5\u671f"),S.a.createElement("span",null,"\u9605\u8bfb\u91cf")),m.map((e,a)=>S.a.createElement("dd",{key:a},S.a.createElement("span",null,e.statDate),S.a.createElement("span",null,e.intPageReadUser)))),M=[{title:S.a.createElement("div",{className:"col-header"},S.a.createElement("span",null,"\u63a5\u5355\u53f7"),S.a.createElement("span",null,"\u5e7f\u544a\u6807\u9898"),S.a.createElement("span",null,"\u7c89\u4e1d\u91cf"),S.a.createElement("span",null,"\u5b9e\u9645\u53d1\u6587\u65f6\u95f4"),S.a.createElement("span",null,"\u9605\u8bfb\u5355\u4ef7(\u5143)"),S.a.createElement("span",null,"\u9884\u4f30\u6536\u5165(\u5143)"),S.a.createElement("span",null,"\u5b9e\u9645\u6536\u5165(\u5143)"),S.a.createElement("span",null,"\u72b6\u6001"),S.a.createElement("span",null,"\u76d1\u63a7\u72b6\u6001"),S.a.createElement("span",null,"\u64cd\u4f5c")),key:"td",render:e=>S.a.createElement("div",{className:"table-row"},S.a.createElement("ul",null,S.a.createElement("li",null,"\u8ba2\u5355\u7f16\u53f7: ",e.missionId),S.a.createElement("li",null,"\u63a5\u5355\u65f6\u95f4\uff1a",window.common.getDate(e.createDate,!0)),S.a.createElement("li",null,"\u6d3b\u52a8\u7f16\u53f7: ",e.campaignId)),S.a.createElement("div",{className:"tab-col"},S.a.createElement("div",null,S.a.createElement("img",{className:N.a["headImg"],style:{height:"50px"},src:e.headImg}),S.a.createElement("br",null),e.appNickName),S.a.createElement("div",{style:{width:"20%"}},S.a.createElement("label",{className:N.a["borl"]},window.common.advertLocal[e.appArticlePosition-1]),S.a.createElement("br",null),S.a.createElement("a",{target:"_blank",href:"".concat(void 0===e.articleVisitUrl?"".concat(window.common.articleUrl,"/fshstatic/view.html?id=").concat(e.missionArticleId):e.articleVisitUrl),className:"block txtHide","data-tip":e.title,"data-html":!0},e.title),S.a.createElement(f.a,null)),S.a.createElement("div",null,e.appTotalUserCnt),S.a.createElement("div",null,void 0===e.realPostArticleTime?"--":e.realPostArticleTime),S.a.createElement("div",null,e.adUnitPrice),S.a.createElement("div",null,e.estimateMin,"~",e.estimateMax),S.a.createElement("div",null,void 0===e.flowRealIncome?"--":S.a.createElement(r["a"],{placement:"bottom",title:"\u6bcf\u65e5\u8ba2\u5355\u9605\u8bfb\u91cf",content:j,trigger:"hover",visible:h===e.id,onVisibleChange:a=>this.handleHoverChange(a,e)},S.a.createElement("span",{className:"cur"},e.flowRealIncome))),S.a.createElement("div",null,19===Number(e.missionStatus)?"\u53d6\u6d88":null,18===Number(e.missionStatus)?"\u7ed3\u7b97\u5931\u8d25":window.common.missionStatus[Number(e.missionStatus)-10]),S.a.createElement("div",null,window.common.monitorStatus[Number(e.monitorStatus)-1]),S.a.createElement("div",{className:"g-tc"},S.a.createElement("div",{className:"opeartion-items"},13===e.missionStatus?S.a.createElement(D.a,{to:{pathname:"/taskdetail",state:{id:e.id,type:1}},className:"block"},"\u7ed3\u7b97"):null,11===e.missionStatus?S.a.createElement("p",{className:"cur purple-color",onClick:()=>this.cancelMissionEvent(e.id)},"\u53d6\u6d88\u8ba2\u5355"):null,S.a.createElement(D.a,{to:{pathname:"/taskdetail",state:{id:e.id,type:0}}},"\u67e5\u770b"),3===Number(e.monitorStatus)||4===Number(e.monitorStatus)?S.a.createElement("p",{className:"cur purple-color",onClick:()=>this.viewMonitorEvent(e)},"\u67e5\u770b\u76d1\u63a7"):null))))}],O=document.body.offsetHeight-130-260;return S.a.createElement("div",{className:N.a.administrator},S.a.createElement("header",{className:"header-style"},"\u8ba2\u5355\u5217\u8868"),S.a.createElement(i["a"],{visible:o,title:"\u9605\u8bfb\u6570\u76d1\u63a7",width:800,onCancel:()=>this.closeEvent(),footer:S.a.createElement("div",{className:"g-tr"},S.a.createElement(l["a"],{type:"primary",onClick:()=>this.closeEvent()},"\u5173\u95ed"))},S.a.createElement(y["a"],{missionItems:d,activeIndex:0,xData:u,yReadUserVal:p,yReadUserData:g,yDifVal:v,yDifValData:b,alias:w,realPostArticleTime:k,monitorDateStart:C,monitorDateEnd:P,monitorStatus:V})),S.a.createElement("ul",{className:N.a.search},S.a.createElement("li",null,S.a.createElement("label",null,"\u516c\u4f17\u53f7\u540d\u79f0"),S.a.createElement(n["a"],{className:"ml10",placeholder:"\u8bf7\u8f93\u5165\u516c\u4f17\u53f7\u540d\u79f0",value:a.appNickName,onChange:e=>this.changeFormEvent(e,"appNickName")})),S.a.createElement("li",null,S.a.createElement("label",null,"\u6d3b\u52a8\u7f16\u53f7"),S.a.createElement(n["a"],{className:"ml10",placeholder:"\u8bf7\u8f93\u5165\u6d3b\u52a8\u7f16\u53f7",value:a.campaignId,onChange:e=>this.changeFormEvent(e,"campaignId")})),S.a.createElement("li",null,S.a.createElement("label",null,"\u72b6\u6001"),S.a.createElement(E["a"],{className:"ml10 w180",value:a.missionStatus,onChange:e=>this.changeFormEvent(e,"missionStatus")},S.a.createElement(I,{value:null},"\u8bf7\u9009\u62e9"),window.common.missionStatus.map((e,a)=>S.a.createElement(I,{className:0===a||6===a?"hide":"",key:a,value:a+10},e)),S.a.createElement(I,{value:19},"\u53d6\u6d88"))),S.a.createElement("li",null,S.a.createElement("label",null,"\u5e7f\u544a\u4e3b\u7f16\u53f7"),S.a.createElement(n["a"],{className:"ml10",placeholder:"\u8bf7\u8f93\u5165\u5e7f\u544a\u4e3b\u7f16\u53f7",value:a.adMerchantCode,onChange:e=>this.changeFormEvent(e,"adMerchantCode")})),S.a.createElement("li",null,S.a.createElement("label",null,"\u6d41\u91cf\u4e3b\u5546\u6237\u7f16\u53f7"),S.a.createElement(n["a"],{className:"ml10",placeholder:"\u8bf7\u8f93\u5165\u6d41\u91cf\u4e3b\u5546\u6237\u7f16\u53f7",value:a.flowMerchantCode,onChange:e=>this.changeFormEvent(e,"flowMerchantCode")})),S.a.createElement("li",{className:"w2600"},S.a.createElement("label",null,"\u8ba2\u5355\u53f7"),S.a.createElement(n["a"],{className:"ml10",placeholder:"\u8bf7\u8f93\u5165\u8ba2\u5355\u53f7",value:a.missionId,onChange:e=>this.changeFormEvent(e,"missionId")})),S.a.createElement("li",null,S.a.createElement(l["a"],{type:"primary",onClick:()=>this.searchEvent()},"\u67e5\u8be2"),S.a.createElement(l["a"],{className:"ml10",onClick:()=>this.clearEvent()},"\u91cd\u7f6e"))),S.a.createElement(s["a"],{dataSource:t,columns:M,pagination:c,rowKey:e=>e.id,loading:R,scroll:{y:O},className:"table",size:"middle"}))}}a["default"]=V}}]);