(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[22],{aDyQ:function(e,a,t){"use strict";t.r(a);t("H2sK");var l=t("ydYK"),m=(t("vm15"),t("khzz")),n=(t("f9jU"),t("ZZoX")),s=(t("Q1Sh"),t("xSYZ")),i=t("Ico4"),c=t.n(i),r=t("UWy3"),o=t.n(r),d=(t("mRFZ"),t("JXgG")),p=(t("Mzdm"),t("beTn")),u=t("mK77"),E=t.n(u),v=(t("dQQm"),t("2o49")),N=t("2w0b"),b=t.n(N),g=t("2Qu+"),h=t.n(g),y=t("TsPW"),S=t("zefA"),D=v["a"].TextArea;class w extends N["Component"]{constructor(e){super(e),this.initDictionary=(e=>{var a=this.state,t=a.token;a.form;Object(y["H"])({type:e,token:t}).then(a=>{var t="provinceType"===e?{provinceData:a.data}:{mediaData:a.data};this.setState(E()({},t))})}),this.openNotification=((e,a)=>{p["a"][e]({message:"\u7ed3\u7b97\u72b6\u6001",description:a,duration:10})}),this.initForm=(()=>{var e=this.state,a=e.token,t=e.id;Object(y["Y"])({id:t,token:a}).then(e=>{if(!e.data)return!1;var a=Object.assign(this.state.form,e.data);this.setState({form:a})})}),this.changeFormEvent=((e,a)=>{var t=Object.assign(this.state.params,{[a]:e.target.value});this.setState({params:t})}),this.settleEvent=(e=>{e.preventDefault(),this.props.form.validateFields((e,a)=>{if(!e){var t=this.state,l=t.params,m=t.token,n=t.form,s=void 0===l.settleReadCnt?a.settleReadCnt:l.settleReadCnt,i=void 0===l.adSettleReadCnt?a.adSettleReadCnt:l.adSettleReadCnt,c={settleMissions:[{remarks:l.remarks,missionId:n.missionId,settleReadCnt:s,adSettleReadCnt:i}],token:m};this.setState({isDisabled:!0}),Object(y["pb"])(c).then(e=>{var a=e.data[0];if(e.success&&a.data.length>0){var t=a.success?"success":"error";this.openNotification(t,b.a.createElement("div",null,b.a.createElement("p",null,a.data[0].data,1===Number(a.data[0].isSuc)?b.a.createElement("em",{className:"green-color"},"\u6210\u529f"):b.a.createElement("em",{className:"red-color"},"\u5931\u8d25")),b.a.createElement("p",null,a.data[1].data,b.a.createElement("em",null,1===Number(a.data[1].isSuc)?b.a.createElement("em",{className:"green-color"},"\u6210\u529f"):b.a.createElement("em",{className:"red-color"},"\u5931\u8d25"))),b.a.createElement("p",null,a.data[2].data,b.a.createElement("em",null,1===Number(a.data[2].isSuc)?b.a.createElement("em",{className:"green-color"},"\u6210\u529f"):b.a.createElement("em",{className:"red-color"},"\u5931\u8d25"))))),this.setState({isDisabled:!1}),window.history.go(-1)}})}})}),this.cancelMission=(e=>{Object(y["xb"])({id:this.props.location.state.id,missionStatus:19}).then(e=>{e.success&&(d["a"].success(e.message),window.history.go(-1))})}),this.viewMonitorEvent=(e=>{Object(y["W"])({missionId:e.missionId}).then(a=>{if(a.success){var t=a.data;this.setState({xData:t.xData,yReadUserVal:t.yReadUserVal,yReadUserData:t.yReadUserData,yDifVal:t.yDifVal,yDifValData:t.yDifValData,alias:t.alias,realPostArticleTime:t.realPostArticleTime,monitorDateStart:t.monitorDateStart,monitorDateEnd:t.monitorDateEnd,isChartsVisible:!0,monitorStatus:t.monitorStatus,missionItems:e})}})}),this.closeEvent=(()=>{this.setState({isChartsVisible:!1})}),this.state={form:{campaign:{campaignName:"",postStatus:"",auditRemark:"",dateStart:"",dateEnd:"",targetGender:"",targetMediaCategory:"",impImage:"",targetArea:"",adType:"",unitPrice:""}},params:{remarks:null},provinceData:[],mediaData:[],isDisabled:!1,type:0}}componentDidMount(){var e=this;return o()(c.a.mark(function a(){var t,l;return c.a.wrap(function(a){while(1)switch(a.prev=a.next){case 0:if(t=e.props.location.state,t.id){a.next=3;break}return a.abrupt("return",!1);case 3:return l=window.localStorage.getItem("token"),a.next=6,e.setState({type:t.type,token:l,id:t.id});case 6:e.initDictionary("provinceType"),e.initDictionary("parent_mediatype"),e.initForm();case 9:case"end":return a.stop()}},a)}))()}render(){var e=this.state,a=e.form,t=e.provinceData,i=e.mediaData,c=e.params,r=e.isDisabled,o=e.isChartsVisible,d=e.missionItems,p=e.xData,u=e.yReadUserVal,E=e.yReadUserData,N=e.yDifVal,g=e.yDifValData,y=e.alias,w=e.realPostArticleTime,C=e.monitorDateStart,f=e.monitorDateEnd,T=e.monitorStatus,R=this.props.form.getFieldDecorator,A=this.props.location.state,x=(e,t,l)=>{""!==t?/^[0-9]\d*$/.test(Number(t))?(Number(t)>Number(a.settleReadCnt)&&l("\u4e0d\u80fd\u8d85\u51fa\u6700\u5927\u53ef\u7ed3\u7b97\u91cf"),this.props.form.validateFields(["adSettleReadCnt"],e=>{}),l()):l("\u53ea\u80fd\u8f93\u5165\u6574\u6570"):l("\u8bf7\u8f93\u5165\u6d41\u91cf\u4e3b\u7ed3\u7b97\u9605\u8bfb\u91cf")},k=(e,t,l)=>{""!==t?/^[0-9]\d*$/.test(Number(t))?Number(t)>Number(a.adSettleReadCnt)?l("\u4e0d\u80fd\u8d85\u51fa\u6700\u5927\u53ef\u7ed3\u7b97\u91cf"):Number(t)<Number(c.settleReadCnt)?l("\u5e7f\u544a\u4e3b\u8ba1\u8d39\u9605\u8bfb\u91cf\u4e0d\u5f97\u5c0f\u4e8e\u6d41\u91cf\u4e3b\u8ba1\u8d39\u9605\u8bfb\u91cf"):void 0===c.settleReadCnt&&Number(t)<Number(a.settleReadCnt)?l("\u5e7f\u544a\u4e3b\u8ba1\u8d39\u9605\u8bfb\u91cf\u4e0d\u5f97\u5c0f\u4e8e\u6d41\u91cf\u4e3b\u8ba1\u8d39\u9605\u8bfb\u91cf"):l():l("\u53ea\u80fd\u8f93\u5165\u6574\u6570"):l("\u8bf7\u8f93\u5165\u5e7f\u544a\u4e3b\u7ed3\u7b97\u9605\u8bfb\u91cf")},M=e=>{switch(e){case"provinceType":var l=[];return void 0!==a.campaign.targetAreaArray&&void 0!==t&&a.campaign.targetAreaArray.map(e=>{t.map(a=>{e===a.value&&l.push(a.label)})}),l;case"parent_mediatype":var m=[];return void 0!==a.campaign.targetMediaCategoryArray&&void 0!==i&&a.campaign.targetMediaCategoryArray.map(e=>{i.map(a=>{a.dictChildList.map(a=>{e===a.value&&m.push(a.label)})})}),m}};return b.a.createElement("div",{className:h.a.administrator},b.a.createElement("header",{className:"header-style"},"\u8ba2\u5355\u8be6\u60c5"),b.a.createElement(n["a"],{visible:o,title:"\u9605\u8bfb\u6570\u76d1\u63a7",width:800,onCancel:()=>this.closeEvent(),footer:b.a.createElement("div",{className:"g-tr"},b.a.createElement(s["a"],{type:"primary",onClick:()=>this.closeEvent()},"\u5173\u95ed"))},b.a.createElement(S["a"],{missionItems:d,activeIndex:0,xData:p,yReadUserVal:u,yReadUserData:E,yDifVal:N,yDifValData:g,alias:y,realPostArticleTime:w,monitorDateStart:C,monitorDateEnd:f,monitorStatus:T})),b.a.createElement("div",{className:h.a.createBlocks},b.a.createElement(m["a"],{onSubmit:this.settleEvent,className:h.a.form,name:"form",style:{borderTop:"none",paddingTop:0,marginTop:0}},b.a.createElement("div",null,b.a.createElement("div",{className:"".concat(h.a.items," mb24")},b.a.createElement("label",{className:h.a.labName},"\u63a5\u5355\u516c\u4f17\u53f7\uff1a"),b.a.createElement("div",null,b.a.createElement("img",{src:a.headImg,style:{width:"50px",height:"50px",marginRight:"10px"}}),a.appNickName)),b.a.createElement("div",{className:"".concat(h.a.items," mb24")},b.a.createElement("label",{className:h.a.labName},"\u5546\u6237\u7f16\u53f7\uff1a"),b.a.createElement("div",null,a.flowMerchantCode)),b.a.createElement("div",{className:"".concat(h.a.items," mb24")},b.a.createElement("label",{className:h.a.labName},"\u8ba2\u5355\u72b6\u6001\uff1a"),b.a.createElement("div",null,18===Number(a.missionStatus)?"\u7ed3\u7b97\u5931\u8d25":null,19===Number(a.missionStatus)?"\u53d6\u6d88":window.common.missionStatus[Number(a.missionStatus)-10])),b.a.createElement("div",{className:"".concat(h.a.items," mb24")},b.a.createElement("label",{className:h.a.labName},"\u63a5\u5355\u65f6\u95f4\uff1a"),b.a.createElement("div",null,void 0===a.createDate?null:window.common.getDate(a.createDate,!0))),b.a.createElement("div",{className:"".concat(h.a.items," mb24")},b.a.createElement("label",{className:h.a.labName},"\u63a5\u5355\u4f4d\u7f6e\uff1a"),b.a.createElement("div",null,window.common.advertLocal[a.appArticlePosition-1])),b.a.createElement("div",{className:"".concat(h.a.items," mb24")},b.a.createElement("label",{className:h.a.labName},"\u53d1\u6587\u65f6\u95f4\uff1a"),b.a.createElement("div",null,void 0===a.realPostArticleTime?"--":a.realPostArticleTime)),b.a.createElement("div",{className:"".concat(h.a.items," mb24")},b.a.createElement("label",{className:h.a.labName},"\u672a\u7ed3\u7b97\u8ba2\u5355\u9884\u4f30\u603b\u9605\u8bfb\uff1a"),b.a.createElement("div",null,a.readUserTotalMin,"~",a.readUserTotalMax)),b.a.createElement("div",{className:"".concat(h.a.items," mb24")},b.a.createElement("label",{className:h.a.labName},30===a.campaign.postStatus?"\u6d3b\u52a8\u5b8c\u6210\u5269\u4f59\u9605\u8bfb":"\u6d3b\u52a8\u5269\u4f59\u53ef\u7ed3\u7b97\u9605\u8bfb","\uff1a"),b.a.createElement("div",null,a.residueSettleCnt)),b.a.createElement("div",{className:"".concat(h.a.items," mb24")},b.a.createElement("label",{className:h.a.labName},"\u8ba2\u5355\u9884\u4f30\u9605\u8bfb\uff1a"),b.a.createElement("div",null,a.readUserMin,"~",a.readUserMax)),b.a.createElement("div",{className:"".concat(h.a.items," mb24")},b.a.createElement("label",{className:h.a.labName},"\u8ba2\u5355\u5b9e\u9645\u9605\u8bfb\uff1a"),b.a.createElement("div",null,a.missionRealReadCnt,b.a.createElement("span",{className:"purple-color ml30 cur",onClick:()=>this.viewMonitorEvent(a)},"\u9605\u8bfb\u6570\u76d1\u63a7\u8be6\u60c5"))),b.a.createElement("div",{className:"".concat(h.a.items," ").concat(0===A.type?"mb24":"")},b.a.createElement("label",{className:h.a.labName,style:0===A.type?null:{verticalAlign:"top",paddingTop:"10px"}},"\u6d41\u91cf\u4e3b\u7ed3\u7b97\u9605\u8bfb\u91cf\uff1a"),13!==a.missionStatus?b.a.createElement("div",null,11===a.missionStatus||12===a.missionStatus?"--":a.settleReadCnt):b.a.createElement("div",null,0===A.type?a.settleReadCnt:b.a.createElement(m["a"].Item,null,R("settleReadCnt",{initialValue:a.settleReadCnt,rules:[{validator:x}]})(b.a.createElement(v["a"],{onChange:e=>this.changeFormEvent(e,"settleReadCnt")}))))),b.a.createElement("div",{className:"".concat(h.a.items," ").concat(0===A.type?"mb24":"")},b.a.createElement("label",{className:h.a.labName,style:0===A.type?null:{verticalAlign:"top",paddingTop:"10px"}},"\u5e7f\u544a\u4e3b\u7ed3\u7b97\u9605\u8bfb\u91cf\uff1a"),13!==a.missionStatus?b.a.createElement("div",null,11===a.missionStatus||12===a.missionStatus?"--":a.adSettleReadCnt):b.a.createElement("div",null,0===A.type?a.adSettleReadCnt:b.a.createElement(m["a"].Item,null,R("adSettleReadCnt",{initialValue:a.adSettleReadCnt,rules:[{validator:k}]})(b.a.createElement(v["a"],{style:{width:"280px"},onChange:e=>this.changeFormEvent(e,"adSettleReadCnt")}))))),b.a.createElement("div",{className:"".concat(h.a.items," mb24")},b.a.createElement("label",{className:h.a.labName,style:0===A.type?null:{verticalAlign:"top",paddingTop:"10px"}},"\u7ed3\u7b97\u5907\u6ce8\uff1a"),13!==a.missionStatus?b.a.createElement("div",null,void 0===a.remarks?"--":a.remarks):b.a.createElement("div",null,0===A.type?void 0===a.remarks?"--":a.remarks:b.a.createElement("div",null,b.a.createElement(D,{row:4,className:h.a["textarea"],value:c.remarks,onChange:e=>this.changeFormEvent(e,"remarks")}),b.a.createElement(l["a"],{title:"\u786e\u8ba4\u8981\u6267\u884c\u7ed3\u7b97\u5417?",onConfirm:e=>this.settleEvent(e),okText:"\u662f",cancelText:"\u5426"},b.a.createElement(s["a"],{type:"primary",disabled:!1!==r,htmlType:"submit",className:"ml30"},"\u7ed3\u7b97"))))),b.a.createElement("div",{className:"".concat(h.a.items," mb24")},b.a.createElement("label",{className:h.a.labName},"\u6d3b\u52a8\u72b6\u6001\uff1a"),b.a.createElement("div",null,window.common.activityStatus(Number(a.campaign.postStatus)))),b.a.createElement("div",{className:"".concat(h.a.items," mb24")},b.a.createElement("label",{className:h.a.labName},"\u5ba1\u6838\u72b6\u6001\uff1a"),b.a.createElement("div",null,window.common.activityStatusData[Number(a.campaign.auditStatus)-1])),b.a.createElement("div",{className:"".concat(h.a.items," mb24")},b.a.createElement("label",{className:h.a.labName},"\u5ba1\u6838\u5907\u6ce8\uff1a"),b.a.createElement("div",null,a.campaign.auditRemark)),b.a.createElement("div",{className:"".concat(h.a.items," mb24")},b.a.createElement("label",{className:h.a.labName,style:{verticalAlign:"top",marginTop:"10px"}},"\u7d20\u6750\uff1a"),b.a.createElement("div",null,b.a.createElement("a",{href:"".concat(window.common.articleUrl,"/fshstatic/view.html?id=").concat(a.campaign.postContent),target:"_blank"},b.a.createElement("img",{src:a.campaign.impImage})))),b.a.createElement("div",{className:"".concat(h.a.items," mb24")},b.a.createElement("label",{className:h.a.labName},"\u6d3b\u52a8\u540d\u79f0\uff1a"),b.a.createElement("div",null,a.campaign.campaignName)),b.a.createElement("div",{className:"mb24 ".concat(h.a.items)},b.a.createElement("label",{className:h.a.labName,style:{verticalAlign:"top",marginTop:"10px"}},"\u5b9a\u5411\u8bbe\u5b9a\uff1a"),b.a.createElement("ul",{className:h.a.target},b.a.createElement("li",null,b.a.createElement("div",{className:h.a.cell},b.a.createElement("em",null,"\u7537\u5973\uff1a"),b.a.createElement("div",{className:h.a.item},0!==Number(a.campaign.targetGender)?"\u8bbe\u7f6e\u6bd4\u4f8b":"\u4e0d\u9650\u5236"),0!==Number(a.campaign.targetGender)?b.a.createElement("div",{className:"".concat(h.a.col)},b.a.createElement("div",null,1===Number(a.campaign.targetGender)?"\u7537\u7c89":"\u5973\u7c89"),b.a.createElement("em",null,">"),b.a.createElement("div",{className:"ml10 bold"},void 0===a.campaign.targetGenderScale?0:100*a.campaign.targetGenderScale,"%")):null)),b.a.createElement("li",null,b.a.createElement("div",{className:h.a.cell},b.a.createElement("em",null,"\u5730\u57df\uff1a"),b.a.createElement("div",{className:h.a.item},"[]"!==a.campaign.targetArea?"\u5df2\u9009\u63a8\u5e7f\u5730\u57df":"\u4e0d\u9650\u5236"),b.a.createElement("div",{className:"".concat(h.a.selDicTarget," bold")},void 0!==a.campaign.targetAreaArray?M("provinceType").join(","):null))),b.a.createElement("li",{className:h.a.last},b.a.createElement("div",{className:h.a.cell},b.a.createElement("em",null,"\u7c7b\u522b\uff1a"),b.a.createElement("div",{className:h.a.item},"[]"!==a.campaign.targetMediaCategory?"\u5df2\u9009\u63a8\u5e7f\u7c7b\u522b":"\u4e0d\u9650\u5236"),b.a.createElement("div",{className:"".concat(h.a.selDicTarget," bold")},void 0!==a.campaign.targetMediaCategoryArray?M("parent_mediatype").join(","):null))))),b.a.createElement("div",{className:"mb24 ".concat(h.a.items)},b.a.createElement("label",{className:h.a.labName,style:{verticalAlign:"top",marginTop:"10px"}},"\u516c\u4f17\u53f7\u8bbe\u5b9a\uff1a"),b.a.createElement("ul",{className:"".concat(h.a.setWx," clearfix")},1===a.missionLimit?b.a.createElement("li",null,"\u6bcf\u4e2a\u516c\u4f17\u53f7\u63a5\u8fc7\u6211\u7684\u76f8\u4f3c\u6587\u6848\u540e",b.a.createElement("div",{className:h.a.col},b.a.createElement("div",null,b.a.createElement("span",{className:"bold"},a.campaign.missionLimitDay),"\u5929\u5185\u4e0d\u80fd\u518d\u63a5\u6211\u7684\u5e7f\u544a"))):b.a.createElement("li",null,"\u6bcf\u4e2a\u516c\u4f17\u53f7\u53ea\u53ef\u63a5\u672c\u6587\u6848\u4e00\u6b21"))),b.a.createElement("div",{className:"mb24 ".concat(h.a.items)},b.a.createElement("label",{className:h.a.labName,style:{verticalAlign:"top",marginTop:"10px"}},"\u6295\u653e\u65f6\u95f4\uff1a"),b.a.createElement("ul",{className:"".concat(h.a.setDate," clearfix")},b.a.createElement("li",null,b.a.createElement("em",null,"\u63a8\u5e7f\u65e5\u671f\uff1a"),b.a.createElement("div",null,window.common.getDate(a.campaign.dateStart),"~",window.common.getDate(a.campaign.dateEnd))),b.a.createElement("li",{className:h.a.last},b.a.createElement("em",null,"\u53d1\u6587\u65f6\u6bb5\uff1a"),b.a.createElement("div",{className:"inlineb"},void 0===a.campaign.hourStart?"\u4e0d\u9650\u5236":"".concat(a.campaign.hourStart,"\u70b9~").concat(a.campaign.hourEnd,"\u70b9"))))),b.a.createElement("div",{className:"mb24 ".concat(h.a.items)},b.a.createElement("label",{className:h.a.labName,style:{verticalAlign:"top",marginTop:"10px"}},"\u9884\u7b97\uff1a"),b.a.createElement("div",{className:h.a.setPrice},b.a.createElement("ul",{className:"clearfix"},b.a.createElement("li",null,b.a.createElement("em",null,"\u5355\u4ef7\uff1a"),b.a.createElement("div",null,b.a.createElement("span",{className:"bold"},a.campaign.unitPrice),"\u5143 / \u9605\u8bfb")),b.a.createElement("li",null,b.a.createElement("em",null,"\u603b\u9884\u7b97\uff1a"),b.a.createElement("div",null,b.a.createElement("span",{className:"bold"},a.campaign.postAmtTotal),"\u5143"))),b.a.createElement("div",{className:"mt30"},"\u9884\u7b97\u9605\u8bfb\u91cf\uff1a",b.a.createElement("em",{className:"bold"},a.campaign.finalAvailableCnt)))),b.a.createElement("div",{className:"mb24 ".concat(h.a.items)},b.a.createElement("label",{className:h.a.labName},"\u6295\u653e\u4f4d\u7f6e\uff1a"),b.a.createElement("div",{className:h.a.adLocal},b.a.createElement("div",null,9===a.campaign.appArticlePosition?"\u4e0d\u9650":window.common.advertLocal[a.campaign.appArticlePosition-1]),b.a.createElement("em",null,"\u5e7f\u544a\u6700\u5c11\u4fdd\u7559\u65f6\u95f4\uff1a"),b.a.createElement("div",null,a.campaign.retentionTime,"\u5c0f\u65f6"))),a.postAmtTotal<5e3?null:b.a.createElement("div",null,b.a.createElement("div",{className:"mb24 ".concat(h.a.items)},b.a.createElement("label",{className:h.a.labName},"\u516c\u4f17\u53f7\u7c7b\u578b\uff1a"),b.a.createElement("ul",{className:h.a.pubType},b.a.createElement("li",null,window.common.wxAccountType(a.campaign.appType)))),b.a.createElement("div",{className:"mb24 ".concat(h.a.items)},b.a.createElement("label",{className:h.a.labName,style:{verticalAlign:"top"}},"\u7c89\u4e1d\u6570\uff1a"),b.a.createElement("div",{className:h.a.fansNum},"\u5927\u4e8e",a.campaign.fansNumLimit,0===a.campaign.userAppNumLimit?null:b.a.createElement("p",null,"\u53ea\u5141\u8bb8\u540c\u4e00\u7528\u6237\u4e0b",a.campaign.userAppNumLimit,"\u4e2a\u516c\u4f17\u53f7\u63a5\u5355"),0===a.campaign.appMissionNumLimit?null:b.a.createElement("p",null,"\u53ea\u5141\u8bb8\u63a5\u8fc7",a.campaign.appMissionNumLimit,"\u5355\u4ee5\u5185\u7684\u516c\u4f17\u53f7\u63a5\u5355")))),b.a.createElement("div",{className:"mb24 ".concat(h.a.items)},b.a.createElement("label",{className:h.a.labName},"\u5907\u6ce8\u8981\u6c42\uff1a"),b.a.createElement("div",{className:h.a.describe},void 0===a.remarks?"--":a.remarks))))),b.a.createElement("div",{className:"mt30 g-tc"},11===Number(a.missionStatus)?b.a.createElement(l["a"],{title:"\u60a8\u786e\u5b9a\u8981\u5173\u95ed\u8fd9\u9879\u4e1a\u52a1\u5417?",onConfirm:()=>this.cancelMission(a),okText:"\u662f",cancelText:"\u5426"},b.a.createElement(s["a"],{type:"primary"},"\u5173\u95ed")):null,b.a.createElement(s["a"],{onClick:()=>{window.history.go(-1)},className:"ml30"},"\u8fd4\u56de")))}}a["default"]=m["a"].create()(w)}}]);