(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{RhLG:function(e,t,a){"use strict";a.r(t);a("H2sK");var n=a("ydYK"),l=(a("Q1Sh"),a("xSYZ")),i=(a("f9jU"),a("ZZoX")),s=a("Ico4"),r=a.n(s),c=a("UWy3"),m=a.n(c),o=a("mK77"),u=a.n(o),g=(a("mRFZ"),a("JXgG")),h=a("2w0b"),p=a.n(h),d=a("2Qu+"),E=a.n(d),v=a("TsPW"),y=a("nD7b"),b=a("Rq1I"),w=new b["a"];class C extends h["Component"]{constructor(e){super(e),this.initForm=(()=>{var e=this.state,t=e.appId,a=e.form,n={appId:t};Object(v["ib"])(n).then(e=>{e.success&&(a=Object.assign(a,e.data),w.loadData("provinceType",a.targetAreaList).then(e=>{this.setState({selAreaData:e})}),w.loadData("parent_mediatype",a.wechatAccountTypeList).then(e=>{this.setState({selCategoryData:e})}),this.setState({form:a}))})}),this.changePage=(e=>{e=0===e?1:e;var t=Object.assign(this.state.pagination,{currentPage:e});this.setState({pagination:t}),this.loadList()}),this.onShowSizeChange=((e,t)=>{var a=this.state.pagination;a=Object.assign(a,{currentPage:e,limit:t,pageSize:t}),this.setState({pagination:a}),this.loadList()}),this.changeFormEvent=((e,t)=>{var a=Object.assign(this.state.params,{[e]:t.target.value});this.setState({params:a})}),this.checkEvent=(e=>{var t={appIdList:[e]};Object(v["n"])(t).then(e=>{e.success&&(g["a"].success(e.message),window.history.go(-1))})}),this.closeEvent=(()=>{this.setState({tagVisible:!1,areaVisible:!1})}),this.updateTag=(e=>{var t=this.state.form,a=2===e?{wechatAccountTypeList:t.targetMediaCategory}:{targetAreaList:t.targetArea},n=u()({appIdList:[t.appId]},a,{tagType:e});Object(v["nb"])(n).then(e=>{e.success&&(g["a"].success(e.message),document.location.reload())})}),this.getDictionary=(e=>{var t=this.state,a=t.form,n=t.dictData,l=[],i={},s=2===e?a.targetMediaCategory:a.targetArea;s.map(e=>{n.map(t=>{e===t.value&&l.push(t.label)})}),i=2===e?{selCategoryData:l,tagVisible:!1}:{selAreaData:l,areaVisible:!1},this.setState(u()({},i)),this.updateTag(e)}),this.getIndexTag=((e,t,a)=>{var n=this.state.form,l="parent_mediatype"===a?"targetMediaCategory":"targetArea";n=Object.assign(n,{[l]:e}),this.setState({form:n,dictData:t})}),this.setTargetEvent=(e=>{var t,a=this.state.form;switch(e){case 1:t={areaVisible:!0};break;case 2:t={tagVisible:!0};break}this.setState(u()({},t,{form:a}))}),this.state={activeIndex:1,form:{targetMediaCategory:[],targetArea:[]},campaignId:null,type:0,missionData:[],pagination:{size:"small",showSizeChanger:!0,total:0,currentPage:1,limit:5,pageSize:5,onChange:this.changePage,onShowSizeChange:this.onShowSizeChange},provinceData:[],mediaData:[],areaVisible:!1,tagVisible:!1,selAreaData:[],selCategoryData:[]}}componentDidMount(){var e=this;return m()(r.a.mark(function t(){var a;return r.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.props.location.state,a.appId){t.next=3;break}return t.abrupt("return",!1);case 3:return t.next=5,e.setState({appId:a.appId});case 5:e.initForm();case 6:case"end":return t.stop()}},t)}))()}componentWillUnmount(){this.setState=((e,t)=>{})}render(){var e=this.state,t=e.form,a=e.selAreaData,s=e.selCategoryData,r=e.areaVisible,c=e.tagVisible;return p.a.createElement("div",{className:E.a.administrator},p.a.createElement("header",{className:"header-style"},"\u516c\u4f17\u53f7\u8be6\u60c5"),p.a.createElement(i["a"],{visible:r,width:700,onCancel:this.closeEvent,onOk:()=>this.getDictionary(1)},p.a.createElement(y["a"],{type:"provinceType",atype:"account",getIndexTag:this.getIndexTag,tagData:t.targetAreaList})),p.a.createElement(i["a"],{visible:c,width:500,onCancel:this.closeEvent,onOk:()=>this.getDictionary(2)},p.a.createElement(y["a"],{type:"parent_mediatype",atype:"account",parent:"parent",getIndexTag:this.getIndexTag,tagData:t.wechatAccountTypeList})),p.a.createElement("ul",{className:E.a.detaillist},p.a.createElement("li",null,p.a.createElement("em",null,"\u516c\u4f17\u53f7\uff1a"),p.a.createElement("div",null,t.nickName)),p.a.createElement("li",null,p.a.createElement("em",null,"\u516c\u4f17\u53f7\u72b6\u6001\uff1a"),p.a.createElement("div",null,-1===Number(t.verifyTypeInfo)?"\u672a\u8ba4\u8bc1":"\u5df2\u8ba4\u8bc1")),p.a.createElement("li",null,p.a.createElement("em",null,"\u6388\u6743\u65f6\u95f4\uff1a"),p.a.createElement("div",null,window.common.getDate(t.authDate,!0))),p.a.createElement("li",null,p.a.createElement("em",null,"\u5ba1\u6838\u72b6\u6001\uff1a"),p.a.createElement("div",null,window.common.weChatstatus[t.status-1])),p.a.createElement("li",null,p.a.createElement("em",null,"\u5546\u6237\u7f16\u53f7\uff1a"),void 0!==t.company?p.a.createElement("div",null,t.company.map((e,a)=>a===t.company.length-1?p.a.createElement("label",{key:a},e.companyName,"(",e.agencyCode,")"):p.a.createElement("label",{key:a},e.companyName,"(",e.agencyCode,")\u3001"))):null),p.a.createElement("li",null,p.a.createElement("em",null,"\u7c7b\u578b\uff1a"),p.a.createElement("div",null,0===Number(t.serviceTypeInfo)||1===Number(t.serviceTypeInfo)?"\u8ba2\u9605\u53f7":"\u670d\u52a1\u53f7")),p.a.createElement("li",null,p.a.createElement("em",null,"\u8ba4\u8bc1\u4fe1\u606f\uff1a"),p.a.createElement("div",null,t.principalName)),p.a.createElement("li",null,p.a.createElement("em",null,"\u7c89\u4e1d\u91cf\uff1a"),p.a.createElement("div",null,t.userTotal)),p.a.createElement("li",null,p.a.createElement("em",null,"\u6708\u53d1\u6587\u6570\uff1a"),p.a.createElement("div",null,t.totalMsgIdCount)),p.a.createElement("li",null,p.a.createElement("em",null,"\u5e73\u5747\u9605\u8bfb\uff1a"),p.a.createElement("div",null,t.avgTotalReadUser)),p.a.createElement("li",null,p.a.createElement("em",null,"\u5730\u57df\uff1a"),p.a.createElement("div",{className:E.a["box"]},0===a.length?"\u4e0d\u9650\u5236":a.join(",")),p.a.createElement(l["a"],{className:E.a.setBtn,onClick:()=>this.setTargetEvent(1)},"\u8bbe\u7f6e\u6807\u7b7e")),p.a.createElement("li",null,p.a.createElement("em",null,"\u516c\u4f17\u53f7\u5206\u7c7b\uff1a"),p.a.createElement("div",{className:E.a["box"]},0===s.length?"\u4e0d\u9650\u5236":s.join(",")),p.a.createElement(l["a"],{className:E.a.setBtn,onClick:()=>this.setTargetEvent(2)},"\u8bbe\u7f6e\u6807\u7b7e")),p.a.createElement("li",null,p.a.createElement("em",null,"\u7537\u7c89\uff1a"),p.a.createElement("div",null,t.manUserRatio,"%")),p.a.createElement("li",null,p.a.createElement("em",null,"\u5973\u7c89\uff1a"),p.a.createElement("div",null,t.woManUserRatio,"%")),p.a.createElement("li",null,p.a.createElement("em",null,"\u672a\u77e5\uff1a"),p.a.createElement("div",null,t.noUserRatio,"%")),p.a.createElement("li",{style:{width:"100%"},className:"block g-tc"},p.a.createElement("div",{className:"g-tc"},1===Number(t.status)?p.a.createElement(n["a"],{title:"\u786e\u8ba4\u8981\u3010\u901a\u8fc7\u3011\u8fd9\u6761\u4fe1\u606f\u5417?",onConfirm:()=>this.checkEvent(t.appId),okText:"\u662f",cancelText:"\u5426"},p.a.createElement(l["a"],{style:{marginLeft:"100px"},type:"primary",className:"ml30"},"\u5ba1\u6838\u901a\u8fc7")):null,p.a.createElement(l["a"],{className:"ml30",onClick:()=>{window.history.go(-1)}},"\u8fd4\u56de")))))}}t["default"]=C}}]);