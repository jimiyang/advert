(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{Zl7g:function(e,a,t){"use strict";t.r(a);t("K9jA");var n=t("ekpG"),l=(t("Q1Sh"),t("xSYZ")),s=(t("dQQm"),t("2o49")),i=(t("H2sK"),t("ydYK")),c=(t("PrJT"),t("Vhqn")),r=(t("mRFZ"),t("JXgG")),m=t("Ico4"),o=t.n(m),u=t("mK77"),d=t.n(u),h=t("UWy3"),p=t.n(h),E=(t("khvN"),t("iNs4")),g=(t("pDDZ"),t("83a4")),v=t("2w0b"),S=t.n(v),w=t("2Qu+"),b=t.n(w),N=t("h+Wj"),C=t.n(N),k=t("a/LZ"),y=t.n(k),f=t("TsPW"),x=g["a"].Option,j=E["a"].RangePicker;class D extends v["Component"]{constructor(e){var a;super(e),a=this,this.loadList=p()(o.a.mark(function e(){var t,n,l,s;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.state,n=t.pagination,l=t.search,s=d()({currentPage:n.currentPage,limit:n.limit},l),a.setState({loading:!0}),e.next=5,Object(f["p"])(s).then(e=>{if(a.setState({loading:!1}),e.success){var t=Object.assign(n,{total:e.total});a.setState({activityData:e.data,pagination:t})}});case 5:case"end":return e.stop()}},e)})),this.changePage=(e=>{e=0===e?1:e;var a=Object.assign(this.state.pagination,{currentPage:e,current:e});this.setState({pagination:a}),this.loadList()}),this.onShowSizeChange=((e,a)=>{var t=this.state.pagination;t=Object.assign(t,{currentPage:e,current:e,limit:a}),this.setState({pagination:t}),this.loadList()}),this.changeFormEvent=((e,a,t)=>{var n=this.state.search,l={};switch(a){case"date":l={dateStart:t[0],dateEnd:t[0]};break;case"postStatus":l={[a]:e};break;case"extrend_json":l={[a]:e.target.value};break;case"campaignId":l={[a]:e.target.value};break;case"merchantCode":l={[a]:e.target.value};break;default:l={[a]:e};break}n=Object.assign(n,l),this.setState({search:n})}),this.searchEvent=(()=>{var e=Object.assign(this.state.pagination,{currentPage:1,current:1});this.setState({pagination:e}),this.loadList()}),this.clearEvent=(()=>{var e=this.state.search;e=Object.assign(e,{dateStart:null,dateEnd:null,postStatus:null,campaignName:null});var a=Object.assign(this.state.pagination,{currentPage:1,current:1});this.setState({search:e,pagination:a}),this.loadList()}),this.cancelActivityEvent=((e,a)=>{var t;t="stop"===a?29:"pause"===a?27===e.postStatus?28:27:25;var n={id:e.id,postStatus:t};Object(f["Ab"])(n).then(e=>{e.success&&(r["a"].success(e.message),this.loadList())})}),this.state={loginName:null,search:{dateStart:null,dateEnd:null,postStatus:null,campaignName:null,campaignId:null,merchantCode:null,extrend_json:null},pagination:{size:"small",limit:10,currentPage:1,current:1,total:0,showQuickJumper:!0,showSizeChanger:!0,onChange:this.changePage,onShowSizeChange:this.onShowSizeChange},activityData:[],loading:!1}}componentDidMount(){var e=this;return p()(o.a.mark(function a(){var t;return o.a.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return t=JSON.parse(window.localStorage.getItem("login_info")),a.next=3,e.setState({loginName:t.data.loginName});case 3:e.loadList();case 4:case"end":return a.stop()}},a)}))()}render(){var e=this.state,a=e.search,t=e.activityData,r=e.pagination,m=e.loading,o=[{title:S.a.createElement("div",{className:"col-header"},S.a.createElement("span",null,"\u63a8\u5e7f\u6587\u7ae0"),S.a.createElement("span",null,"\u63a8\u5e7f\u65f6\u95f4"),S.a.createElement("span",null,"\u5355\u4ef7(\u9605\u8bfb/\u5143)"),S.a.createElement("span",null,"\u9884\u7b97(\u5143)"),S.a.createElement("span",null,"\u9884\u4f30\u9605\u8bfb\u91cf"),S.a.createElement("span",null,"\u63a5\u5355\u5a92\u4f53\u6570"),S.a.createElement("span",null,"\u5b9e\u9645\u9605\u8bfb"),S.a.createElement("span",null,"\u5b9e\u9645\u652f\u51fa"),S.a.createElement("span",null,"\u72b6\u6001"),S.a.createElement("span",null,"\u64cd\u4f5c")),key:"td",render:e=>S.a.createElement("div",{className:"table-row"},S.a.createElement("ul",null,S.a.createElement("li",null,"\u6d3b\u52a8\u7f16\u53f7: ",e.campaignId),S.a.createElement("li",null,window.common.getDate(e.createDate,!0)),S.a.createElement("li",{className:"txthide tmid"},"\u6d3b\u52a8\u540d\u79f0:",S.a.createElement(c["a"],{placement:"topLeft",title:e.campaignName},S.a.createElement("span",null,e.campaignName))),S.a.createElement("li",null,"\u5546\u6237\u7f16\u53f7: ",e.merchantCode)),S.a.createElement("div",{className:"tab-col"},S.a.createElement("div",null,S.a.createElement("a",{target:"_blank",href:"".concat(window.common.articleUrl,"/fshstatic/view.html?id=").concat(e.postContent)},S.a.createElement("img",{src:e.impImage}))),S.a.createElement("div",null,S.a.createElement("p",null,window.common.getDate(e.dateStart)),"~",S.a.createElement("p",null,window.common.getDate(e.dateEnd))),S.a.createElement("div",null,e.unitPrice),S.a.createElement("div",null,e.postAmtTotal),S.a.createElement("div",null,void 0===e.finalAvailableCnt?"--":e.finalAvailableCnt),S.a.createElement("div",null,void 0===e.missionNum?"--":e.missionNum),S.a.createElement("div",null,void 0===e.missionRealReadCnt?"--":e.missionRealReadCnt),S.a.createElement("div",null,void 0===e.realCost?"--":e.realCost),S.a.createElement("div",null,window.common.activityStatus(e.postStatus)),S.a.createElement("div",null,S.a.createElement("div",{className:"opeartion g-tc"},S.a.createElement("div",{className:"opeartion-items"},21===e.postStatus?null:S.a.createElement("div",null,S.a.createElement(C.a,{to:{pathname:"/viewdetail",state:{id:e.id,campaignId:e.campaignId,type:1}}},"\u67e5\u770b")),21===e.postStatus?S.a.createElement("div",null,S.a.createElement(C.a,{to:{pathname:"/viewdetail",state:{id:e.id,campaignId:e.campaignId,type:0}}},"\u5ba1\u6838")):null,27===e.postStatus||28===e.postStatus?S.a.createElement("div",null,S.a.createElement(i["a"],{title:"\u662f\u5426\u8981".concat(27===e.postStatus?"\u6682\u505c":"\u542f\u52a8","\u6b64\u6d3b\u52a8?"),onConfirm:()=>this.cancelActivityEvent(e,"pause"),okText:"\u662f",cancelText:"\u5426"},S.a.createElement("a",{className:"option mt10"},27===e.postStatus?"\u6682\u505c":"\u542f\u52a8"))):null,21===e.postStatus||27===e.postStatus||28===e.postStatus?S.a.createElement("div",null,S.a.createElement(i["a"],{title:"\u662f\u5426\u8981\u505c\u6b62\u6b64\u6d3b\u52a8?",onConfirm:()=>this.cancelActivityEvent(e,"stop"),okText:"\u662f",cancelText:"\u5426"},S.a.createElement("a",{className:"option mt10"},"\u505c\u6b62"))):null,23===e.postStatus?S.a.createElement("div",null,S.a.createElement(i["a"],{title:"\u662f\u5426\u8981\u53d6\u6d88\u6b64\u6d3b\u52a8?",onConfirm:()=>this.cancelActivityEvent(e,"check"),okText:"\u662f",cancelText:"\u5426"},S.a.createElement("a",{className:"ml10"},"\u53d6\u6d88"))):null)))))}],u=document.body.offsetHeight-130-260;return S.a.createElement("div",{className:b.a.administrator},S.a.createElement("header",{className:"header-style"},"\u6d3b\u52a8\u5217\u8868"),S.a.createElement("ul",{className:b.a.search},S.a.createElement("li",null,S.a.createElement("label",null,"\u63a8\u5e7f\u65f6\u95f4"),S.a.createElement(j,{value:null===a.dateStart||""===a.dateStart?null:[y()(a.dateStart,"YYYY-MM-DD"),y()(a.dateEnd,"YYYY-MM-DD")],className:"w2600",onChange:(e,a)=>this.changeFormEvent(e,"date",a)})),S.a.createElement("li",null,S.a.createElement("label",null,"\u72b6\u6001"),S.a.createElement(g["a"],{className:"w180",value:a.postStatus,onChange:e=>this.changeFormEvent(e,"postStatus")},S.a.createElement(x,{value:null},"\u8bf7\u9009\u62e9"),window.common.postStatus.map((e,a)=>S.a.createElement(x,{key:a,value:e.id},e.name)))),S.a.createElement("li",null,S.a.createElement("label",null,"\u6587\u7ae0\u6807\u9898"),S.a.createElement(s["a"],{className:"w180",value:a.extrend_json,onChange:e=>this.changeFormEvent(e,"extrend_json")})),S.a.createElement("li",null,S.a.createElement("label",null,"\u6d3b\u52a8\u7f16\u53f7"),S.a.createElement(s["a"],{className:"w180",value:a.campaignId,onChange:e=>this.changeFormEvent(e,"campaignId")})),S.a.createElement("li",null,S.a.createElement("label",null,"\u5546\u6237\u7f16\u7801"),S.a.createElement(s["a"],{className:"w180",value:a.merchantCode,onChange:e=>this.changeFormEvent(e,"merchantCode")})),S.a.createElement("li",null,S.a.createElement(l["a"],{type:"primary",onClick:()=>this.searchEvent()},"\u67e5\u8be2"),S.a.createElement(l["a"],{className:"ml10",onClick:()=>this.clearEvent()},"\u91cd\u7f6e"))),S.a.createElement(n["a"],{dataSource:t,columns:o,pagination:r,rowKey:e=>e.id,loading:m,scroll:{y:u},className:"table",size:"middle"}))}}a["default"]=D}}]);